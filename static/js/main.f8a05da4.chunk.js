(this["webpackJsonpui-refresh-test"]=this["webpackJsonpui-refresh-test"]||[]).push([[0],{11:function(e,t,n){e.exports={nav_list:"LeftNavBar_nav_list__2oGGv",nav_item:"LeftNavBar_nav_item__3gAF4",active:"LeftNavBar_active__3cITO",nav_icon:"LeftNavBar_nav_icon__3lOoH",nav_desc:"LeftNavBar_nav_desc__Zz9_b"}},20:function(e,t,n){e.exports={container:"App_container__MiK3W",left_navbar:"App_left_navbar__SQTn7",page_content:"App_page_content__1GAyC"}},37:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(17),o=n.n(r),s=n(13),i=(n(37),n(20)),u=n.n(i),j=n(18),d=n(4),h=function(){return Object(s.b)()},l=s.c,b=n(14),f=n.n(b),v=n(23),x=n(10),O="https://next-dev.kbase.us/services/auth",p={pending:!1},_=Object(x.b)("auth/authFromToken",function(){var e=Object(v.a)(f.a.mark((function e(t){var n,c,a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(O,"/api/V2/token"),{method:"GET",headers:{Authorization:t||""}});case 2:if((n=e.sent).ok){e.next=15;break}return c=n.statusText,e.prev=5,e.next=8,n.json();case 8:a=e.sent.error,c+=": ".concat(a.message),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(5);case 14:throw new Error('Failed to validate token: "'.concat(c,'"'));case 15:return e.next=17,n.json();case 17:return r=e.sent,e.abrupt("return",{token:t,tokenInfo:r});case 19:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t){return e.apply(this,arguments)}}()),k=Object(x.b)("auth/revokeCurrentToken",function(){var e=Object(v.a)(f.a.mark((function e(t,n){var c,a,r,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null===(c=n.getState().auth._tokenInfo)||void 0===c?void 0:c.id,r=n.getState().auth.token,a&&r){e.next=4;break}throw new Error("Failed to revoke token: No token to revoke");case 4:return e.next=6,fetch("".concat(O,"/tokens/revoke/").concat(a),{method:"DELETE",headers:{Authorization:r||""}});case 6:if((o=e.sent).ok){e.next=9;break}throw new Error("Failed to revoke token: ".concat(o.statusText));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),g=Object(x.c)({name:"auth",initialState:p,reducers:{},extraReducers:function(e){return e.addCase(_.pending,(function(e){e.error=void 0,e.pending=!0})).addCase(_.fulfilled,(function(e,t){e.token=t.payload.token,e.username=t.payload.tokenInfo.user,e._tokenInfo=t.payload.tokenInfo,e.pending=!1})).addCase(_.rejected,(function(e,t){e.error=t.error.message,e.username=void 0,e._tokenInfo=void 0,e.pending=!1})).addCase(k.pending,(function(){})).addCase(k.fulfilled,(function(){return p})).addCase(k.rejected,(function(){}))}}).reducer,m=n(19);var C=n(11),N=n.n(C),w=n(26),F=n(9),A=n(1);function T(){return Object(A.jsx)("nav",{children:Object(A.jsxs)("ul",{className:N.a.nav_list,children:[Object(A.jsx)(y,{path:"/",desc:"Navigator",icon:F.c}),Object(A.jsx)(y,{path:"/orgs",desc:"Orgs",icon:F.h}),Object(A.jsx)(y,{path:"/catalog",desc:"Catalog",icon:F.a}),Object(A.jsx)(y,{path:"/search",desc:"Search",icon:F.f}),Object(A.jsx)(y,{path:"/jobs",desc:"Jobs",icon:F.g}),Object(A.jsx)(y,{path:"/account",desc:"Account",icon:F.e}),Object(A.jsx)(y,{path:"/feeds",desc:"Feeds",icon:F.b}),Object(A.jsx)(y,{path:"/count",desc:"Count",icon:F.d}),Object(A.jsx)(y,{path:"/auth",desc:"Auth",icon:F.d})]})})}var y=function(e){var t=e.path,n=e.desc,c=e.icon,a=Object(d.f)(),r=N.a.nav_item;return a.pathname===t&&(r+=" ".concat(N.a.active)),Object(A.jsx)("li",{className:r,children:Object(A.jsxs)(j.b,{to:t,children:[Object(A.jsx)(w.a,{className:N.a.nav_icon,icon:c}),Object(A.jsx)("span",{className:N.a.nav_desc,children:n})]})},t)};function L(){return Object(A.jsx)("section",{children:Object(A.jsx)("h2",{children:"Page Not Found."})})}function E(){return Object(A.jsx)("section",{children:Object(A.jsx)("h2",{children:"Nothing here yet"})})}var I=Object(x.c)({name:"count",initialState:{count:0},reducers:{increment:function(e){e.count+=1}}}),S=I.reducer,B=I.actions.increment,P=function(e){return e.count.count},G=function(){var e=l(P);return Object(A.jsx)(A.Fragment,{children:e})};function z(){var e=h();return Object(A.jsxs)("section",{children:[Object(A.jsxs)("h2",{children:["The count is: ",Object(A.jsx)(G,{})]}),Object(A.jsx)("button",{onClick:function(){e(B())},children:"Add"})]})}function J(){var e=l((function(e){return e.auth})),t=e.username,n=e.token,c=e.error,a=e.pending;return Object(A.jsxs)("div",{children:[Object(A.jsx)("h2",{children:"Auth"}),Object(A.jsx)("p",{children:n?"You are logged in as '".concat(t,"'"):"You are not logged in"}),a?Object(A.jsx)("p",{children:"Please wait..."}):n?Object(A.jsx)(K,{}):Object(A.jsx)(D,{}),c?Object(A.jsx)("span",{style:{color:"red"},children:c}):null]})}var D=function(){var e=h(),t=Object(c.useState)(),n=Object(m.a)(t,2),a=n[0],r=n[1];return Object(A.jsxs)("div",{children:[Object(A.jsx)("input",{placeholder:"kbase token",type:"text",value:null!==a&&void 0!==a?a:"",onChange:function(e){return r(e.target.value)}}),Object(A.jsx)("button",{onClick:function(){a?e(_(a)):alert("Please enter a kbase token")},children:"Login"})]})},K=function(){var e=h();return Object(A.jsx)("div",{children:Object(A.jsx)("button",{onClick:function(){return e(k())},children:"Logout of KBase"})})};function M(){var e=h(),t=function(e){var t=document.cookie.split(";").map((function(e){return e.trim().split("=")})).find((function(t){var n=Object(m.a)(t,2),c=n[0];return n[1],c.trim()===e}));return t?t[1]:void 0}("kbase_session");return Object(c.useEffect)((function(){t&&e(_(t))}),[t]),Object(A.jsx)(j.a,{basename:"https://next-dev.kbase.us/services/static",children:Object(A.jsxs)("div",{className:u.a.container,children:[Object(A.jsx)("div",{className:u.a.left_navbar,children:Object(A.jsx)(T,{})}),Object(A.jsx)("div",{className:u.a.page_content,children:Object(A.jsxs)(d.c,{children:[Object(A.jsx)(d.a,{path:"/count",children:Object(A.jsx)(z,{})}),Object(A.jsx)(d.a,{path:"/auth",children:Object(A.jsx)(J,{})}),Object(A.jsx)(d.a,{exact:!0,path:"/",children:Object(A.jsx)(E,{})}),Object(A.jsx)(d.a,{path:"*",children:Object(A.jsx)(L,{})})]})})]})})}var Y=function(){return Object(x.a)({reducer:{count:S,auth:g}})},H=Y(),Q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,47)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),c(e),a(e),r(e),o(e)}))};o.a.render(Object(A.jsx)(a.a.StrictMode,{children:Object(A.jsx)(s.a,{store:H,children:Object(A.jsx)(M,{})})}),document.getElementById("root")),Q()}},[[46,1,2]]]);
//# sourceMappingURL=main.f8a05da4.chunk.js.map