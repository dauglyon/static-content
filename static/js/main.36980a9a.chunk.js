(this["webpackJsonpui-refresh-test"]=this["webpackJsonpui-refresh-test"]||[]).push([[0],{101:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),a=n(25),i=n.n(a),s=n(13),c=(n(78),n(40)),l=n.n(c),u=n(23),d=n(4);const b={pageTitle:void 0,environment:"unknown"},_=Object(d.d)({name:"page",initialState:b,reducers:{setPageTitle:(e,t)=>{e.pageTitle=t.payload},setEnvironment:(e,t)=>{e.environment=t.payload}}});var j=_.reducer;const{setPageTitle:p,setEnvironment:m}=_.actions,h=()=>Object(s.d)(),g=s.e,v=document.title,x=e=>{const t=h();return Object(o.useEffect)((()=>(t(p(e)),document.title="KBase"+(void 0!==e?`: ${e}`:""),()=>{t(p(void 0)),document.title=v})),[t,e]),null},O="https://ci-europa.kbase.us/services/auth",f={pending:!1},y=Object(d.c)("auth/authFromToken",(async e=>{let t;try{t=await fetch(`${O}/api/V2/token`,{method:"GET",headers:{Authorization:e||""}})}catch(n){throw console.error("Authentication Error."),n}if("undefined"===typeof t||!t.ok){let e=t.statusText;try{e+=`: ${(await t.json()).error.message}`}catch(n){throw console.error("Error processing error message."),n}throw new Error(`Failed to validate token: "${e}"`)}return{token:e,tokenInfo:await t.json()}})),B=Object(d.c)("auth/revokeCurrentToken",(async(e,t)=>{var n;const o=null===(n=t.getState().auth._tokenInfo)||void 0===n?void 0:n.id,r=t.getState().auth.token;if(!o||!r)throw new Error("Failed to revoke token: No token to revoke");const a=await fetch(`${O}/tokens/revoke/${o}`,{method:"DELETE",headers:{Authorization:r||""}});if(!a.ok)throw new Error(`Failed to revoke token: ${a.statusText}`)}));var w=Object(d.d)({name:"auth",initialState:f,reducers:{},extraReducers:e=>e.addCase(y.pending,(e=>{e.error=void 0,e.pending=!0})).addCase(y.fulfilled,((e,t)=>{e.token=t.payload.token,e.username=t.payload.tokenInfo.user,e._tokenInfo=t.payload.tokenInfo,e.pending=!1})).addCase(y.rejected,((e,t)=>{e.error=t.error.message,e.username=void 0,e._tokenInfo=void 0,e.pending=!1})).addCase(B.pending,(()=>{})).addCase(B.fulfilled,(()=>f)).addCase(B.rejected,(()=>{}))}).reducer;const k=e=>e.auth?e.auth.username:null;var N=n(68),A=n(8),E=n(19);const S={},C=async(e,t,n)=>{var o;const r=(e=>{if(!S[e])throw new Error(`Consumed service ${e} was not set prior to use.`);return S[e]})("serviceWizardApi").endpoints.serviceStatus,a={module_name:e,version:t},i=n.dispatch(r.initiate(a,{subscribe:!0,forceRefetch:300}));await i;const s=n.getState(),c=r.select(a)(s);if(c.isError)return{error:c.error};const l=null===(o=c.data)||void 0===o?void 0:o[0].url;return i.unsubscribe(),{url:l}};var T=n(49);const L=Object(T.a)({reducerPath:"combinedApi",baseQuery:(e=>{const t={...e,prepareHeaders:async(t,n)=>{e.prepareHeaders&&await e.prepareHeaders(t,n);const o=n.getState().auth.token;return o&&t.set("authorization",`${o}`),t}},n=Object(E.d)(t),o=async(t,r,a)=>{if(void 0===t.service.url){const e=await C(t.service.name,t.service.release,r);return e.error?{error:e.error}:o({...t,service:{...t.service,url:e.url}},r,a)}const i=Math.random(),s={url:new URL(t.service.url,e.baseUrl).toString(),method:"POST",body:{version:"1.1",id:i,method:t.method,params:t.params},...t.fetchArgs},c=n(s,r,a),l=await c;if(l.error&&500===l.error.status&&(e=>{if("object"===typeof e&&null!==e&&["version","error","id"].every((t=>t in e))){const{version:t,error:n}=e;if("1.1"!==t)return!1;if("object"===typeof n&&null!==n&&["name","code","message"].every((e=>e in n)))return!0}return!1})(l.error.data))return l.error.data.id&&l.error.data.id!==i?{error:{status:"CUSTOM_ERROR",error:"JsonRpcProtocolError",data:`Response ID "${l.error.data.id}" !== Request ID "${i}"`}}:{error:{status:"JSONRPC_ERROR",data:l.error.data}};if(!l.data)return c;const u=l.data;return u.id&&u.id!==i?{error:{status:"CUSTOM_ERROR",error:"JsonRpcProtocolError",data:`Response ID "${u.id}" !== Request ID "${i}"`}}:{data:u.result}};return o})({baseUrl:"https://CI.kbase.us"}),endpoints:()=>({})}),I=(P={url:"/services/user_profile/rpc"},e=>({...e,service:P}));var P;const F=L.enhanceEndpoints({addTagTypes:["Profile"]}).injectEndpoints({endpoints:e=>({status:e.query({query:()=>I({method:"UserProfile.status",params:[]})}),getUserProfile:e.query({query:({usernames:e})=>I({method:"UserProfile.get_user_profile",params:[e]}),providesTags:(e,t,{usernames:n})=>n.map((e=>({type:"Profile",id:e})))}),setUserProfile:e.mutation({query:({profile:e})=>I({method:"UserProfile.set_user_profile",params:[{profile:e}]}),invalidatesTags:(e,t,{profile:n})=>[{type:"Profile",id:n.user.username}]})})}),{getUserProfile:q,setUserProfile:R,status:M}=F.endpoints;var D=n(66),K=n.n(D),Q=n(1);const Y=e=>{const t=[K.a.button,e.className].join(" ");return Object(Q.jsx)("button",{className:t,type:void 0,...e})};var J=n(2),z=n(67),U=n.n(z),G=n(52),W=n(70),Z=n(41),X=n.n(Z);const H=e=>{var t,n;const r=e.options,a=$(r),[i,s]=Object(o.useState)(a);Object(o.useEffect)((()=>{V(r)||s(a)}),[r,a]);const c=[X.a["react-select"],null!==(t=e.className)&&void 0!==t?t:""];"right"===e.horizontalMenuAlign&&c.push(X.a["react-select--right"]);const l=null!==(n=e.onChange)&&void 0!==n?n:()=>{},u={className:c.join(" "),classNamePrefix:"react-select",components:e.components,formatOptionLabel:e=>Object(Q.jsxs)("span",{className:X.a.option_content,children:[i&&Object(Q.jsx)("span",{className:X.a.option_content_icon,children:e.icon}),e.label]}),isClearable:e.clearable,isDisabled:e.disabled,isMulti:e.multiple,onChange:e=>{l(e&&"value"in e?[e]:e?[...e]:[])},value:e.value};return V(r)?Object(Q.jsx)(W.a,{...u,loadOptions:async e=>{const t=await r(e);return s($(t)),t},defaultOptions:!0}):Object(Q.jsx)(G.a,{...u,options:r})},V=e=>"function"===typeof e,$=e=>!V(e)&&e.some((e=>"options"in e?$(e.options):!!e.icon)),{DropdownIndicator:ee}=J.q,te=e=>{const t=e.children;return Object(Q.jsx)(H,{...e,value:null,className:[U.a.dropdown,e.className].join(" "),components:{DropdownIndicator:e=>Object(Q.jsx)(ee,{...e,children:t})}})};var ne=n(39);const oe="https://CI.kbase.us",re={UserProfile:`${oe}/services/user_profile/rpc`,NarrativeMethodStore:`${oe}/services/narrative_method_store/rpc`},ae=(e,t)=>new ne.KBaseServiceClient({module:e,url:re[e],authToken:t});var ie=n(5),se=n(11);function ce(){x("Authentication");const{username:e,token:t,error:n,pending:r}=g((e=>e.auth));return Object(o.useEffect)((()=>{(async()=>{if(await new Promise((e=>setTimeout(e,1e3))),!t)return;const n=ae("UserProfile",t),o=await n.call("get_user_profile",[[e]]);console.log({profile:o})})()}),[t,e]),Object(Q.jsxs)("div",{children:[Object(Q.jsx)("p",{children:t?`You are logged in as '${e}'`:"You are not logged in"}),r?Object(Q.jsx)("p",{children:"Please wait..."}):t?Object(Q.jsx)(ue,{}):Object(Q.jsx)(le,{}),n?Object(Q.jsx)("span",{style:{color:"red"},children:n}):null,Object(Q.jsx)("div",{children:Object(Q.jsx)(de,{})})]})}const le=()=>{const e=h(),[t,n]=Object(o.useState)();return Object(Q.jsxs)("div",{children:[Object(Q.jsx)("input",{placeholder:"kbase token",type:"text",value:null!==t&&void 0!==t?t:"",onChange:e=>n(e.target.value)}),Object(Q.jsx)(Y,{onClick:()=>{t?e(y(t)):alert("Please enter a kbase token")},children:"Login"})]})},ue=()=>{const e=h();return Object(Q.jsx)("div",{children:Object(Q.jsx)(Y,{onClick:()=>e(B()),children:"Logout of KBase"})})},de=()=>{var e;const t=g((e=>e.auth.username)),n=Object(o.useMemo)((()=>({usernames:t?[t]:[]})),[t]),r=q.useQuery(n,{skip:!t}),[a,i]=R.useMutation(),[s,c]=Object(o.useState)("");if(!t)return Object(Q.jsx)(Q.Fragment,{});return r.error&&"status"in r.error&&"JSONRPC_ERROR"===r.error.status&&r.error.data.error.message.includes("Something"),Object(Q.jsxs)("div",{style:{maxWidth:"10em"},children:["Profile:",r.isSuccess?JSON.stringify(null===(e=r.data)||void 0===e?void 0:e[0][0]):r.isError?JSON.stringify(r.error):r.isLoading?Object(Q.jsx)(se.a,{icon:ie.D,spin:!0}):" ",Object(Q.jsx)("br",{}),Object(Q.jsx)("input",{type:"text",placeholder:"Change Realname",value:s,onInput:e=>c(e.currentTarget.value)}),Object(Q.jsx)("button",{onClick:()=>(async()=>{var e,t;null===(e=r.data)||void 0===e||e[0][0];const n=JSON.parse(JSON.stringify(null===(t=r.data)||void 0===t?void 0:t[0][0]));void 0!==n&&""!==s.trim()&&(n.user.realname=s.trim(),a({profile:n}))})(),children:"Update"}),i.isLoading?Object(Q.jsx)(se.a,{icon:ie.D,spin:!0}):null,i.isSuccess?Object(Q.jsx)(se.a,{icon:ie.i}):null,i.isError?Object(Q.jsx)(se.a,{icon:ie.M}):null]})},be=Object(d.d)({name:"count",initialState:{count:0},reducers:{increment:e=>{e.count+=1}}});var _e=be.reducer;const{increment:je}=be.actions,pe=e=>e.count.count,me=()=>{const e=g(pe);return Object(Q.jsx)(Q.Fragment,{children:e})};function he(){x("Count");const e=h();return Object(Q.jsxs)("section",{children:[Object(Q.jsxs)("h2",{children:["The count is: ",Object(Q.jsx)(me,{})]}),Object(Q.jsx)(Y,{onClick:()=>{e(je())},children:"Add"})]})}function ge(){const e=Object(A.f)(),t=Object(A.g)(),n=Object(o.useRef)(null),[r,a]=Object(o.useState)("");x(r),Oe((e=>{const n=e.data;Be(n)?t(`/legacy/${n.payload.request.original}`):ye(n)&&a(n.payload)}));const i=Object(o.useMemo)((()=>ve(e.pathname+e.search+e.hash)),[n]);return Object(Q.jsx)("iframe",{style:{overflowY:"hidden"},frameBorder:"0",src:xe(i),ref:n,title:"Legacy Content Wrapper",width:"100%",height:"100%"})}const ve=e=>{var t;return(null===(t=e.match(/(?:\/legacy)+(?:\/(.*))$/))||void 0===t?void 0:t[1])||"/"},xe=e=>`https://legacy.ci-europa.kbase.us/#${e}`,Oe=function(e){Object(o.useEffect)((()=>(window.addEventListener("message",e),()=>{window.removeEventListener("message",e)})),[e])},fe=(e,t)=>n=>"object"===typeof n&&["source","payload"].every((e=>e in n))&&n.source===e&&t(n.payload),ye=fe("kbase-ui.ui.setTitle",(e=>"string"===typeof e)),Be=fe("kbase-ui.app.route-component",(e=>!!e&&"object"===typeof e&&"request"in e&&"object"===typeof e.request&&"original"in e.request&&"string"===typeof e.request.original));function we(){return x("Narrative Navigator"),Object(Q.jsx)("section",{children:Object(Q.jsx)("h2",{children:"Nothing here yet"})})}var ke=()=>Object(Q.jsx)(Q.Fragment,{children:Object(Q.jsx)("section",{children:Object(Q.jsx)("h2",{children:"Page Not Found."})})}),Ne=n(14),Ae=n.n(Ne);var Ee=({version:e,onVersionSelect:t})=>{const[n,r]=Object(o.useState)(e),a=Array(e).fill(null).map(((e,t)=>t+1)).reverse().map((e=>({options:[{value:e,icon:void 0,label:Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)("span",{children:"v"+e}),e===n&&Object(Q.jsx)(se.a,{icon:ie.i,style:{marginLeft:"3rem"}})]})}]})));return Object(Q.jsx)("div",{className:Ae.a.dropdown_wrapper,children:Object(Q.jsxs)(te,{className:Ae.a.version_dropdown,horizontalMenuAlign:"right",options:a,onChange:e=>{return r((n=e)[0].value),void t(n[0].value);var n},children:[n===e?Object(Q.jsxs)("span",{children:["v",n]}):Object(Q.jsxs)("span",{children:["v",n," of ",e]}),Object(Q.jsx)(se.a,{icon:ie.g,style:{marginLeft:"5px"}})]})})},Se=n(69);var Ce=({showVersionDropdown:e,onSelectItem:t,onUpaChange:n,active:r,item:a,idx:i})=>{const s=r?"active":"inactive",c=Se.a(a.timestamp);return Object(o.useEffect)((()=>{if(r){const{access_group:e,obj_id:t,version:o}=a;null===n||void 0===n||n(`${e}/${t}/${o}`)}}),[r,a,n]),Object(Q.jsx)("section",{onClick:()=>function(e){null===t||void 0===t||t(e)}(i),children:Object(Q.jsx)("div",{className:`${Ae.a.narrative_item_outer} ${Ae.a[s]}`,children:Object(Q.jsxs)("div",{className:Ae.a.narrative_item_inner,children:[Object(Q.jsxs)("div",{className:Ae.a.narrative_item_text,children:[a.narrative_title||"Untitiled",e&&r&&Object(Q.jsx)(Ee,{version:a.version,onVersionSelect:e=>function(e){const{access_group:t,obj_id:o}=a;null===n||void 0===n||n(`${t}/${o}/${e}`)}(e)})]}),Object(Q.jsxs)("div",{className:Ae.a.narrative_item_details,children:["Updated ",c," by ",a.creator]})]})})},i)};var Te=function(e){var t;const[n,r]=Object(o.useState)(null!==(t=e.selectedIdx)&&void 0!==t?t:-1);return e.items.length?Object(Q.jsxs)(Q.Fragment,{children:[e.items.map(((t,o)=>Object(Q.jsx)(Ce,{item:t,idx:o,active:o===n,onSelectItem:e=>r(e),onUpaChange:t=>{var n;return null===(n=e.onSelectItem)||void 0===n?void 0:n.call(e,t)},showVersionDropdown:e.showVersionDropdown},o))),function(){const{itemsRemaining:t,hasMoreItems:n,loading:o,onLoadMoreItems:r}=e;return n?o?Object(Q.jsxs)("span",{className:Ae.a.list_footer,children:[Object(Q.jsx)(se.a,{icon:ie.k,spin:!0,style:{marginRight:"5px"}}),"Loading..."]}):Object(Q.jsxs)("span",{className:`${Ae.a.list_footer} ${Ae.a.link_action}`,onClick:r,children:["Load more (",t," remaining)"]}):Object(Q.jsx)("span",{className:Ae.a.list_footer,children:"No more results."})}()]}):e.loading?Object(Q.jsx)("div",{className:Ae.a.narrative_list_loading_outer,children:Object(Q.jsxs)("div",{className:Ae.a.narrative_list_loading_inner,children:[Object(Q.jsx)(se.a,{icon:ie.k,spin:!0,style:{marginRight:"5px"}}),"Loading..."]})}):Object(Q.jsx)("div",{className:Ae.a.narrative_list_loading_outer,children:Object(Q.jsx)("p",{className:Ae.a.narrative_list_loading_inner,children:"No results found."})})};const Le=({profile:e})=>e.cache,Ie=Object(d.c)("profile/loadProfile",(async({token:e,username:t},{getState:n,rejectWithValue:o})=>{if(!t)throw new Error("No username specified.");const r=Le(n());if(t in r)return{profile:r[t]};let a;try{a=await(async(e,t)=>{const n=new ne.KBaseServiceClient({module:"UserProfile",url:"https://ci.kbase.us/services/user_profile/rpc",authToken:e});return await n.call("get_user_profile",[t])})(e,[t])}catch(s){if(s instanceof ne.KBaseJsonRpcError)throw new Error("Error contacting KBase services.");throw s}const i=a[0];return i?{profile:i}:Promise.reject(o({username:t,error:`Username '${t}' does not exist.`}))})),Pe=Object(d.d)({name:"profile",initialState:{cache:{},error:"",pending:!1,realname:"",usernameSelected:null},reducers:{clearError:e=>{e.error=""},selectUsername:(e,t)=>{e.usernameSelected=t.payload}},extraReducers:e=>e.addCase(Ie.pending,(e=>{e.error="",e.pending=!0})).addCase(Ie.fulfilled,((e,t)=>{const{profile:n}=t.payload,{user:o}=n;e.realname=o.realname,e.usernameSelected=o.username;const r={[e.usernameSelected]:n,...e.cache};e.cache=r,e.pending=!1})).addCase(Ie.rejected,((e,t)=>{const n=t.payload;e.pending=!1,e.usernameSelected=null;const o=t.error&&t.error.message?t.error.message:"Error loading profile.";if(!n)return void(e.error=o);const r=n.username;e.cache[r]=(e=>({profile:{user:{username:e,realname:""},profile:{}}}))(r).profile,e.error=`Error loading profile for ${r}.`,e.realname=""}))});var Fe=Pe.reducer;const{clearError:qe,selectUsername:Re}=Pe.actions,Me=({profile:e})=>e.error,De=({profile:e})=>e.realname,Ke=({profile:e})=>e.usernameSelected;var Qe=n(42),Ye=n.n(Qe);const Je=({realname:e,yours:t})=>t?Object(Q.jsx)("span",{children:"This table shows all of your narratives."}):Object(Q.jsxs)("span",{children:["This table shows all narratives owned by ",e," which are also accessible to you."]}),ze=()=>Object(Q.jsx)("div",{children:"Profile Resume"}),Ue=({realname:e,yours:t})=>Object(Q.jsxs)("div",{className:Ye.a.narratives,children:[Object(Q.jsx)(Je,{realname:e,yours:t}),Object(Q.jsx)(Te,{items:[],itemsRemaining:0,hasMoreItems:!1,loading:!1,showVersionDropdown:!0})]}),Ge=({realname:e})=>Object(Q.jsxs)("div",{children:["Profile Infobox for ",e,"."]}),We=({realname:e})=>Object(Q.jsxs)("div",{className:Ye.a.profile,children:[Object(Q.jsx)(Ge,{realname:e}),Object(Q.jsx)(ze,{})]}),Ze=({narrativesLink:e,pageTitle:t,profileLink:n,realname:o,username:r,viewMine:a,viewNarratives:i})=>(x(t),Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)("nav",{className:Ye.a["profile-nav"],children:Object(Q.jsxs)("ul",{className:"links",children:[Object(Q.jsx)("li",{children:Object(Q.jsx)(u.b,{to:n,children:"Profile"})}),Object(Q.jsx)("li",{children:Object(Q.jsx)(u.b,{to:e,children:"Narratives"})})]})}),Object(Q.jsxs)("section",{className:Ye.a["profile-narratives"],children:[i?Object(Q.jsx)(Ue,{realname:o,yours:a}):Object(Q.jsx)(We,{realname:o}),Object(Q.jsx)(Y,{children:"Edit"})]})]}));var Xe=()=>{const e=h(),t=g(Le),n=g(Me),o=g((e=>e.auth.token)),r=g(k),a=o||"",i="narratives"===Object(A.f)().pathname.split("/").slice(-1)[0],{usernameRequested:s}=Object(A.h)(),c="narratives"===s||void 0===s,l=s===r||c,u=r&&c?r:s;if(g(Ke)!==u)return e(Re(u)),Object(Q.jsx)(Q.Fragment,{children:"Loading"});if(n)return console.error(`Error message: ${n}`),e(qe()),Object(Q.jsx)(ke,{});if(!r)return Object(Q.jsx)(Q.Fragment,{children:"Loading authentication state."});const d=c?r:u;d in t||e(Ie({token:a,username:d}));const b=t[d];if(!b)return Object(Q.jsx)(Q.Fragment,{children:"Loading user profile."});const _=b.user.realname,j=_?`${l?"My ":`${_}'s `} Profile`:"",p=l?"/profile/":`/profile/${u}`,m=l?"/profile/narratives":`/profile/${u}/narratives`;return Object(Q.jsx)(Ze,{narrativesLink:m,pageTitle:j,profileLink:p,realname:_,username:u,viewMine:l,viewNarratives:i})};const He=()=>{const e=Object(A.f)();return e.hash?Object(Q.jsx)(A.a,{to:`/legacy/${e.hash.slice(1)}`,replace:!0}):Object(Q.jsx)(A.a,{to:"/narratives",replace:!0})};var Ve=()=>Object(Q.jsx)(Q.Fragment,{children:Object(Q.jsxs)(A.d,{children:[Object(Q.jsx)(A.b,{path:"/legacy/*",element:Object(Q.jsx)(ge,{})}),Object(Q.jsx)(A.b,{path:"/profile/:usernameRequested/narratives",element:Object(Q.jsx)(Xe,{})}),Object(Q.jsx)(A.b,{path:"/profile/:usernameRequested",element:Object(Q.jsx)(Xe,{})}),Object(Q.jsx)(A.b,{path:"/profile",element:Object(Q.jsx)(Xe,{})}),Object(Q.jsx)(A.b,{path:"/count",element:Object(Q.jsx)(he,{})}),Object(Q.jsx)(A.b,{path:"/auth",element:Object(Q.jsx)(ce,{})}),Object(Q.jsx)(A.b,{path:"/narratives/:id/:obj/:ver",element:Object(Q.jsx)(we,{})}),Object(Q.jsx)(A.b,{path:"/narratives/:category",element:Object(Q.jsx)(we,{})}),Object(Q.jsx)(A.b,{path:"/narratives/:category/:id/:obj/:ver",element:Object(Q.jsx)(we,{})}),Object(Q.jsx)(A.b,{path:"/narratives",element:Object(Q.jsx)(we,{})}),Object(Q.jsx)(A.b,{path:"/",element:Object(Q.jsx)(He,{})}),Object(Q.jsx)(A.b,{path:"*",element:Object(Q.jsx)(ke,{})})]})}),$e=n(36),et=n.n($e);function tt(){return Object(Q.jsx)("nav",{children:Object(Q.jsxs)("ul",{className:et.a.nav_list,children:[Object(Q.jsx)(nt,{path:"/",desc:"Navigator",icon:ie.l}),Object(Q.jsx)(nt,{path:"/orgs",desc:"Orgs",icon:ie.K}),Object(Q.jsx)(nt,{path:"/catalog",desc:"Catalog",icon:ie.d}),Object(Q.jsx)(nt,{path:"/search",desc:"Search",icon:ie.y}),Object(Q.jsx)(nt,{path:"/jobs",desc:"Jobs",icon:ie.F}),Object(Q.jsx)(nt,{path:"/account",desc:"Account",icon:ie.s}),Object(Q.jsx)(nt,{path:"/feeds",desc:"Feeds",icon:ie.e}),Object(Q.jsx)(nt,{path:"/count",desc:"Count",icon:ie.o}),Object(Q.jsx)(nt,{path:"/auth",desc:"Auth",icon:ie.o})]})})}const nt=({path:e,desc:t,icon:n})=>{const o=Object(A.f)();let r=et.a.nav_item;return o.pathname===e&&(r+=` ${et.a.active}`),Object(Q.jsx)("li",{className:r,children:Object(Q.jsxs)(u.b,{to:e,children:[Object(Q.jsx)(se.a,{className:et.a.nav_icon,icon:n}),Object(Q.jsx)("span",{className:et.a.nav_desc,children:t})]})},e)};var ot=n(16),rt=n.n(ot);function at(){return Object(Q.jsxs)("header",{className:rt.a.topbar,children:[Object(Q.jsx)("div",{className:rt.a.topbar_item,children:Object(Q.jsx)(st,{})}),Object(Q.jsx)("div",{className:rt.a.topbar_item,children:Object(Q.jsx)("img",{src:"data:image/png;base64,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",alt:""})}),Object(Q.jsx)("div",{className:[rt.a.topbar_item,rt.a.stretch].join(" "),children:Object(Q.jsx)(ct,{})}),Object(Q.jsx)("div",{className:rt.a.topbar_item,children:Object(Q.jsx)(lt,{})}),Object(Q.jsx)("div",{className:rt.a.topbar_item,children:Object(Q.jsx)(it,{})})]})}const it=()=>{const e=g(k),t=g(De),n=Object(A.g)();return Object(Q.jsx)("div",{className:rt.a.login_menu,children:Object(Q.jsx)(te,{horizontalMenuAlign:"right",options:[{options:[{value:"",icon:void 0,label:Object(Q.jsxs)("div",{children:[Object(Q.jsx)("div",{children:t}),Object(Q.jsx)("div",{className:rt.a.login_menu_username,children:e})]})}]},{options:[{value:"/profile",icon:Object(Q.jsx)(se.a,{icon:ie.J}),label:"Your Profile"},{value:"#your_account",icon:Object(Q.jsx)(se.a,{icon:ie.s}),label:"Your Account"}]},{options:[{value:"#sign_out",icon:Object(Q.jsx)(se.a,{icon:ie.A}),label:"Sign Out"}]}],onChange:e=>{(null===e||void 0===e?void 0:e[0])&&n(e[0].value)},children:Object(Q.jsxs)("div",{className:rt.a.login_menu_button,children:[Object(Q.jsx)(se.a,{className:rt.a.login_menu_icon,icon:ie.E}),Object(Q.jsx)(se.a,{icon:ie.C})]})})})},st=()=>Object(Q.jsx)("div",{className:rt.a.hamburger_menu,children:Object(Q.jsx)(te,{options:[{options:[{value:window.location.origin+"/#narrativemanager/start",icon:Object(Q.jsx)(se.a,{icon:ie.p}),label:"Narrative Interface"},{value:window.location.origin+"/#narrativemanager/new",icon:Object(Q.jsx)(se.a,{icon:ie.v}),label:"New Narrative"},{value:window.location.origin+"/#jgi-search",icon:Object(Q.jsx)(se.a,{icon:ie.y}),label:"JGI Search"},{value:window.location.origin+"/#biochem-search",icon:Object(Q.jsx)(se.a,{icon:ie.y}),label:"Biochem Search"}]},{options:[{value:window.location.origin+"/#about/services",icon:Object(Q.jsx)(se.a,{icon:ie.z}),label:"KBase Services Status"}]},{options:[{value:window.location.origin+"/#about",icon:Object(Q.jsx)(se.a,{icon:ie.t}),label:"About"},{value:"https://kbase.us/contact-us",icon:Object(Q.jsx)(se.a,{icon:ie.n}),label:"Contact KBase"},{value:"https://kbase.us/narrative-guide/",icon:Object(Q.jsx)(se.a,{icon:ie.w}),label:"Support"}]}],onChange:e=>{(null===e||void 0===e?void 0:e[0])&&(window.location.href=e[0].value)},children:Object(Q.jsx)(se.a,{className:rt.a.hamburger_menu_icon,icon:ie.c})})}),ct=()=>{const e=g((e=>e.layout.pageTitle));return Object(Q.jsx)("div",{className:rt.a.page_title,children:Object(Q.jsx)("span",{children:e||""})})},lt=()=>{const e=g((e=>e.layout.environment));if("production"===e)return null;const t={ci:ie.q,unknown:ie.x,appdev:ie.L}[e],n={ci:"CI",unknown:"??",appdev:"APPDEV"}[e];return Object(Q.jsxs)("div",{className:rt.a.environment,children:[Object(Q.jsx)("span",{children:n}),Object(Q.jsx)(se.a,{icon:t})]})};function ut({error:e,resetErrorBoundary:t}){return x("Something went wrong"),Object(Q.jsxs)("div",{role:"alert",children:[Object(Q.jsx)("pre",{children:e instanceof Error?e.toString():JSON.stringify(e)}),Object(Q.jsx)("button",{onClick:t,children:"Try again"})]})}const dt=()=>Object(Q.jsxs)(Q.Fragment,{children:["Set your ",Object(Q.jsx)("var",{children:"kbase_session"})," cookie to your login token."]});function bt(){const e=h(),t=function(e){const t=document.cookie.split(";").map((e=>e.trim().split("="))).find((([t,n])=>t.trim()===e));return t?t[1]:void 0}("kbase_session");return Object(o.useEffect)((()=>{t&&e(y(t))}),[e,t]),Object(o.useEffect)((()=>{e(m("ci"))}),[e]),Object(Q.jsx)(u.a,{basename:"",children:Object(Q.jsxs)("div",{className:l.a.container,children:[Object(Q.jsx)("div",{className:l.a.topbar,children:Object(Q.jsx)(at,{})}),Object(Q.jsx)("div",{className:l.a.left_navbar,children:Object(Q.jsx)(tt,{})}),Object(Q.jsx)("div",{className:l.a.page_content,children:Object(Q.jsx)(N.ErrorBoundary,{FallbackComponent:ut,children:t?Object(Q.jsx)(Ve,{}):Object(Q.jsx)(dt,{})})})]})})}const _t={assemblyinput:{color:"#F44336",icon:"icon icon-reads"},assembly:{color:"#920D58",icon:ie.a},chromatographymatrix:{color:"#E91E63",icon:ie.G},collection:{color:"#E91E63",icon:ie.u},contigset:{color:"#3F51B5",icon:ie.a},domainalignment:{color:"#000000",icon:ie.B},estimatekresult:{color:"#000000",icon:ie.h},expressionmatrix:{color:"#2196F3",icon:ie.H},expressionsample:{color:"#2196F3",icon:ie.r},expressionseries:{color:"#2196F3",icon:ie.r},fba:{color:"#673AB7",icon:"icon icon-metabolism"},fbamodel:{color:"#673AB7",icon:"icon icon-metabolism"},featureclusters:{color:"#AEEA00",icon:ie.I},featureset:{color:"#AEEA00",icon:ie.u},functionalmatrix:{color:"#000000",icon:ie.G},genome:{color:"#3F51B5",icon:"icon icon-genome"},genomeannotation:{color:"#920D58",icon:"icon icon-genome"},genomecomparison:{color:"#3F51B5",icon:"icon icon-compare"},genomeset:{color:"#3F51B5",icon:ie.u},heatmap:{color:"#795548",icon:ie.H},media:{color:"#795548",icon:ie.q},metagenome:{color:"#795548",icon:"icon icon-metagenome"},network:{color:"#795548",icon:ie.j},pairedendlibrary:{color:"#795548",icon:"icon icon-reads"},pangenome:{color:"#795548",icon:ie.f},phenotypeset:{color:"#795548",icon:ie.u},phenotypesimulationset:{color:"#795548",icon:ie.u},proteomecomparison:{color:"#795548",icon:ie.b},readsset:{color:"#795548",icon:"icon icon-reads"},referenceassembly:{color:"#795548",icon:ie.d},singleendlibrary:{color:"#795548",icon:"icon icon-reads"},taxonomicmatrix:{color:"#795548",icon:ie.G},taxon:{color:"#920D58",icon:ie.G},tree:{color:"#795548",icon:"icon icon-tree"}};let jt;!function(e){e.release="release",e.beta="beta",e.dev="dev"}(jt||(jt={}));const pt=Object(d.c)("icons",(async({appId:e,appTag:t},n)=>{const o=n.getState(),{appIconCache:r,defaultApp:a}=o.icons;if(!(t in r))return{appTag:t,appId:e,icon:a};if(!r[t][e]){const n=ae("NarrativeMethodStore");try{const[o]=await n.call("get_method_brief_info",[{ids:[e],tag:t}]),r=o.icon.url;return r?{appTag:t,appId:e,icon:{icon:`${re.NarrativeMethodStore.slice(0,-4)}/${r}`,color:"silver"}}:{appTag:t,appId:e,icon:a}}catch{return{appTag:t,appId:e,icon:a}}}return{appTag:t,appId:e,icon:r[t][e]}})),mt={appIconCache:{release:{},beta:{},dev:{}},typeIconInfos:_t,defaultApp:{icon:ie.m,color:"#683AB7"},defaultType:{icon:ie.p,color:"#F44336"},loadingIcon:{icon:ie.D,color:"silver"}};var ht=Object(d.d)({name:"icons",initialState:mt,reducers:{},extraReducers:e=>{e.addCase(pt.fulfilled,((e,t)=>{const n={...e.appIconCache[t.payload.appTag],[t.payload.appId]:t.payload.icon};e.appIconCache={...e.appIconCache,[t.payload.appTag]:n}}))}}).reducer;const gt=e=>Object(d.a)({devTools:!0,reducer:{auth:w,count:_e,icons:ht,layout:j,profile:Fe,[L.reducerPath]:L.reducer},middleware:e=>e().concat(L.middleware),...e}),vt=gt();var xt=e=>{e&&e instanceof Function&&n.e(3).then(n.bind(null,102)).then((({getCLS:t,getFID:n,getFCP:o,getLCP:r,getTTFB:a})=>{t(e),n(e),o(e),r(e),a(e)}))};i.a.render(Object(Q.jsx)(r.a.StrictMode,{children:Object(Q.jsx)(s.a,{store:vt,children:Object(Q.jsx)(bt,{})})}),document.getElementById("root")),xt()},14:function(e,t,n){e.exports={narrative_item_outer:"NarrativeList_narrative_item_outer__3XkM1",active:"NarrativeList_active__2G5K3",dropdown_wrapper:"NarrativeList_dropdown_wrapper__2_oyM",narrative_list_loading_outer:"NarrativeList_narrative_list_loading_outer__zqT8m",narrative_list_loading_inner:"NarrativeList_narrative_list_loading_inner__3N79j",list_footer:"NarrativeList_list_footer__2Ggnp",link_action:"NarrativeList_link_action__2VmhV",narrative_item_inner:"NarrativeList_narrative_item_inner__23b-O",narrative_item:"NarrativeList_narrative_item__KaFOE",narrative_item_text:"NarrativeList_narrative_item_text__2A5DR",narrative_item_details:"NarrativeList_narrative_item_details__1z0Jn",version_dropdown:"NarrativeList_version_dropdown__lMW5h"}},16:function(e,t,n){e.exports={topbar:"TopBar_topbar__3xoma",topbar_item:"TopBar_topbar_item__20292",stretch:"TopBar_stretch__5Y5fJ",hamburger_menu:"TopBar_hamburger_menu__1Nc7c",hamburger_menu_icon:"TopBar_hamburger_menu_icon__3ZgFI",page_title:"TopBar_page_title__1OjqW",environment:"TopBar_environment__Lx09_",login_menu:"TopBar_login_menu__agXq7",login_menu_username:"TopBar_login_menu_username__2AgT3",login_menu_button:"TopBar_login_menu_button__1n-4a",login_menu_icon:"TopBar_login_menu_icon__RrxGE"}},36:function(e,t,n){e.exports={nav_list:"LeftNavBar_nav_list__iLWGq",nav_item:"LeftNavBar_nav_item__35CL2",active:"LeftNavBar_active__38wjJ",nav_icon:"LeftNavBar_nav_icon__e2bJK",nav_desc:"LeftNavBar_nav_desc__1vXc6"}},40:function(e,t,n){e.exports={container:"App_container__MiK3W",left_navbar:"App_left_navbar__SQTn7",page_content:"App_page_content__1GAyC",topbar:"App_topbar__Qqa7Z"}},41:function(e,t,n){e.exports={"react-select":"Select_react-select__3AP0a","react-select--right":"Select_react-select--right__3i7Ff",option_content:"Select_option_content__MAs3-",option_content_icon:"Select_option_content_icon__30ltO"}},42:function(e,t,n){e.exports={narratives:"Profile_narratives__23Ewd",profile:"Profile_profile__OB4QD","profile-narratives":"Profile_profile-narratives__2-BrG","profile-nav":"Profile_profile-nav__O_pFN"}},66:function(e,t,n){e.exports={button:"Button_button__dy3Mj","button--orange":"Button_button--orange__qz8LE","button--yellow":"Button_button--yellow__39O2j","button--green":"Button_button--green__1jnMN","button--grellow":"Button_button--grellow__XMsIY","button--blue":"Button_button--blue__1qDlS","button--ocean_blue":"Button_button--ocean_blue__1duT1","button--teal":"Button_button--teal__2EkA4","button--purple":"Button_button--purple__3iYfW","button--frost_blue":"Button_button--frost_blue__3z68r","button--red":"Button_button--red__1uXEY","button--grey":"Button_button--grey__2blQ7","button--white":"Button_button--white__113aw","button--black":"Button_button--black__xRyDK","button--ink":"Button_button--ink__2A2yA","button--neutral":"Button_button--neutral__1N09L","button--silver":"Button_button--silver__vJtBR","button--base-lightest":"Button_button--base-lightest__1VdzN","button--base-lighter":"Button_button--base-lighter__2fatb","button--base-light":"Button_button--base-light__2MHXG","button--base":"Button_button--base__1K6ls","button--base-dark":"Button_button--base-dark__3FBIk","button--base-darkest":"Button_button--base-darkest__1svmv","button--primary-lightest":"Button_button--primary-lightest__2PHrk","button--primary-lighter":"Button_button--primary-lighter__1eKQI","button--primary-light":"Button_button--primary-light__1e3vb","button--primary":"Button_button--primary__CMiIk","button--primary-vivid":"Button_button--primary-vivid__1ZWxc","button--primary-dark":"Button_button--primary-dark__fQWHL","button--primary-darker":"Button_button--primary-darker__xKZUS","button--secondary-lightest":"Button_button--secondary-lightest__38WC2","button--secondary-lighter":"Button_button--secondary-lighter__3vQVa","button--secondary-light":"Button_button--secondary-light__uMEFl","button--secondary":"Button_button--secondary__1e0cQ","button--secondary-vivid":"Button_button--secondary-vivid__2A61H","button--secondary-dark":"Button_button--secondary-dark__1LQ2V","button--secondary-darkest":"Button_button--secondary-darkest__2Jz7d","button--accent-cool-lightest":"Button_button--accent-cool-lightest__3Zu74","button--accent-cool-lighter":"Button_button--accent-cool-lighter__3fti9","button--accent-cool-light":"Button_button--accent-cool-light__1yyds","button--accent-cool":"Button_button--accent-cool__3Xgd-","button--accent-cool-dark":"Button_button--accent-cool-dark__2hDMk","button--accent-cool-darker":"Button_button--accent-cool-darker__immsh","button--accent-warm-lightest":"Button_button--accent-warm-lightest__Xla-z","button--accent-warm-lighter":"Button_button--accent-warm-lighter__2jrDk","button--accent-warm-light":"Button_button--accent-warm-light__2G7qV","button--accent-warm":"Button_button--accent-warm__vXmYD","button--accent-warm-dark":"Button_button--accent-warm-dark__1Nuye","button--accent-warm-darker":"Button_button--accent-warm-darker__1cOoV","button--success-lightest":"Button_button--success-lightest__2wUDb","button--success-lighter":"Button_button--success-lighter__2j8wQ","button--success-light":"Button_button--success-light__2aE0B","button--success":"Button_button--success__3vCMU","button--success-dark":"Button_button--success-dark__G5BI0","button--success-darker":"Button_button--success-darker__iR1cJ","button--info-lightest":"Button_button--info-lightest__2dM7_","button--info-lighter":"Button_button--info-lighter__3N_Vt","button--info-light":"Button_button--info-light__2MiYm","button--info":"Button_button--info__2smAM","button--info-dark":"Button_button--info-dark__26IIe","button--info-darker":"Button_button--info-darker__Gh1hS","button--warning-lightest":"Button_button--warning-lightest__3ALzN","button--warning-lighter":"Button_button--warning-lighter__372D9","button--warning-light":"Button_button--warning-light__qDy6U","button--warning":"Button_button--warning__3RIhA","button--warning-dark":"Button_button--warning-dark__3LFfO","button--warning-darker":"Button_button--warning-darker__JYMGP","button--error-lightest":"Button_button--error-lightest__3dK53","button--error-lighter":"Button_button--error-lighter__1iMHm","button--error-light":"Button_button--error-light__3SizE","button--error":"Button_button--error__3mR9r","button--error-dark":"Button_button--error-dark__3Q7ul","button--error-darker":"Button_button--error-darker__3UV_y","button--disabled-lightest":"Button_button--disabled-lightest__1ijlQ","button--disabled-light":"Button_button--disabled-light__2ceGa","button--disabled":"Button_button--disabled__3T0_E","button--disabled-dark":"Button_button--disabled-dark__-1HHP","button--mid-green":"Button_button--mid-green__2TurF","button--mid-blue":"Button_button--mid-blue__1QNpx","button--icon-app":"Button_button--icon-app__3Tz2h","button--icon-generic":"Button_button--icon-generic__YlhDR","button--icon-type":"Button_button--icon-type__k35QE","button--created":"Button_button--created__1tQgc","button--estimating":"Button_button--estimating__3y4VD","button--queued":"Button_button--queued__3FS55","button--running":"Button_button--running__3kPz5","button--completed":"Button_button--completed__zAYQj","button--terminated":"Button_button--terminated__2tKSS","button--does_not_exist":"Button_button--does_not_exist__3z4Im"}},67:function(e,t,n){e.exports={dropdown:"Dropdown_dropdown__QusLm"}},78:function(e,t,n){}},[[101,1,2]]]);
//# sourceMappingURL=main.36980a9a.chunk.js.map