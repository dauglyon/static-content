(this["webpackJsonpui-refresh-test"]=this["webpackJsonpui-refresh-test"]||[]).push([[0],{14:function(e,t,n){e.exports={narrative_item_outer:"NarrativeList_narrative_item_outer__3XkM1",active:"NarrativeList_active__2G5K3",dropdown_wrapper:"NarrativeList_dropdown_wrapper__2_oyM",narrative_list_loading_outer:"NarrativeList_narrative_list_loading_outer__zqT8m",narrative_list_loading_inner:"NarrativeList_narrative_list_loading_inner__3N79j",list_footer:"NarrativeList_list_footer__2Ggnp",link_action:"NarrativeList_link_action__2VmhV",narrative_item_inner:"NarrativeList_narrative_item_inner__23b-O",narrative_item:"NarrativeList_narrative_item__KaFOE",narrative_item_text:"NarrativeList_narrative_item_text__2A5DR",narrative_item_details:"NarrativeList_narrative_item_details__1z0Jn",version_dropdown:"NarrativeList_version_dropdown__lMW5h"}},16:function(e,t,n){e.exports={topbar:"TopBar_topbar__3xoma",topbar_item:"TopBar_topbar_item__20292",stretch:"TopBar_stretch__5Y5fJ",hamburger_menu:"TopBar_hamburger_menu__1Nc7c",hamburger_menu_icon:"TopBar_hamburger_menu_icon__3ZgFI",page_title:"TopBar_page_title__1OjqW",environment:"TopBar_environment__Lx09_",login_menu:"TopBar_login_menu__agXq7",login_menu_username:"TopBar_login_menu_username__2AgT3",login_menu_button:"TopBar_login_menu_button__1n-4a",login_menu_icon:"TopBar_login_menu_icon__RrxGE"}},24:function(e,t,n){e.exports={collection_wrapper:"Collections_collection_wrapper__2SZCh",collection_detail:"Collections_collection_detail__o9i__",data_product_detail:"Collections_data_product_detail__2BAjE",detail_header:"Collections_detail_header__NJGWs",data_products:"Collections_data_products__2kvEo",data_product_list:"Collections_data_product_list__eW67G",data_product_placeholder:"Collections_data_product_placeholder__1AbKo"}},26:function(e,t,n){e.exports={figure:"TaxaCount_figure__39iy-","name-section":"TaxaCount_name-section__2hSvI","bars-section":"TaxaCount_bars-section__t-boZ",name:"TaxaCount_name__AxZqJ","bar-row":"TaxaCount_bar-row__X-L_-",bar:"TaxaCount_bar__2-tT3","label-light":"TaxaCount_label-light__2xR2t","label-dark":"TaxaCount_label-dark__2NX1i"}},39:function(e,t,n){e.exports={container:"App_container__MiK3W",topbar:"App_topbar__Qqa7Z",site_content:"App_site_content__2YtWp",left_navbar:"App_left_navbar__SQTn7",page_content:"App_page_content__1GAyC"}},40:function(e,t,n){e.exports={card:"Card_card__jyC8Z",clickable:"Card_clickable__1doGq",selected:"Card_selected__3o-UM","image-wrapper":"Card_image-wrapper__13Ywd",body:"Card_body__1DUfD",subtitle:"Card_subtitle__2_Js4","card-list":"Card_card-list__1IhM2"}},41:function(e,t,n){e.exports={"table-container":"Table_table-container__3nM4C","table-wrapper":"Table_table-wrapper__3WqWs",pagination:"Table_pagination__H-1Ya","sort-icon":"Table_sort-icon__1VSeV","sort-icon--active":"Table_sort-icon--active__37KrX"}},42:function(e,t,n){e.exports={nav_list:"LeftNavBar_nav_list__iLWGq",nav_item:"LeftNavBar_nav_item__35CL2",active:"LeftNavBar_active__38wjJ",nav_icon:"LeftNavBar_nav_icon__e2bJK",nav_desc:"LeftNavBar_nav_desc__1vXc6"}},45:function(e,t,n){e.exports={"react-select":"Select_react-select__3AP0a","react-select--right":"Select_react-select--right__3i7Ff",option_content:"Select_option_content__MAs3-",option_content_icon:"Select_option_content_icon__30ltO"}},46:function(e,t,n){e.exports={narratives:"Profile_narratives__23Ewd",profile:"Profile_profile__OB4QD","profile-narratives":"Profile_profile-narratives__2-BrG","profile-nav":"Profile_profile-nav__O_pFN"}},66:function(e,t,n){e.exports={button:"Button_button__dy3Mj","button--orange":"Button_button--orange__qz8LE","button--yellow":"Button_button--yellow__39O2j","button--green":"Button_button--green__1jnMN","button--grellow":"Button_button--grellow__XMsIY","button--blue":"Button_button--blue__1qDlS","button--ocean_blue":"Button_button--ocean_blue__1duT1","button--teal":"Button_button--teal__2EkA4","button--purple":"Button_button--purple__3iYfW","button--frost_blue":"Button_button--frost_blue__3z68r","button--red":"Button_button--red__1uXEY","button--grey":"Button_button--grey__2blQ7","button--white":"Button_button--white__113aw","button--black":"Button_button--black__xRyDK","button--ink":"Button_button--ink__2A2yA","button--neutral":"Button_button--neutral__1N09L","button--silver":"Button_button--silver__vJtBR","button--base-lightest":"Button_button--base-lightest__1VdzN","button--base-lighter":"Button_button--base-lighter__2fatb","button--base-light":"Button_button--base-light__2MHXG","button--base":"Button_button--base__1K6ls","button--base-dark":"Button_button--base-dark__3FBIk","button--base-darkest":"Button_button--base-darkest__1svmv","button--primary-lightest":"Button_button--primary-lightest__2PHrk","button--primary-lighter":"Button_button--primary-lighter__1eKQI","button--primary-light":"Button_button--primary-light__1e3vb","button--primary":"Button_button--primary__CMiIk","button--primary-vivid":"Button_button--primary-vivid__1ZWxc","button--primary-dark":"Button_button--primary-dark__fQWHL","button--primary-darker":"Button_button--primary-darker__xKZUS","button--secondary-lightest":"Button_button--secondary-lightest__38WC2","button--secondary-lighter":"Button_button--secondary-lighter__3vQVa","button--secondary-light":"Button_button--secondary-light__uMEFl","button--secondary":"Button_button--secondary__1e0cQ","button--secondary-vivid":"Button_button--secondary-vivid__2A61H","button--secondary-dark":"Button_button--secondary-dark__1LQ2V","button--secondary-darkest":"Button_button--secondary-darkest__2Jz7d","button--accent-cool-lightest":"Button_button--accent-cool-lightest__3Zu74","button--accent-cool-lighter":"Button_button--accent-cool-lighter__3fti9","button--accent-cool-light":"Button_button--accent-cool-light__1yyds","button--accent-cool":"Button_button--accent-cool__3Xgd-","button--accent-cool-dark":"Button_button--accent-cool-dark__2hDMk","button--accent-cool-darker":"Button_button--accent-cool-darker__immsh","button--accent-warm-lightest":"Button_button--accent-warm-lightest__Xla-z","button--accent-warm-lighter":"Button_button--accent-warm-lighter__2jrDk","button--accent-warm-light":"Button_button--accent-warm-light__2G7qV","button--accent-warm":"Button_button--accent-warm__vXmYD","button--accent-warm-dark":"Button_button--accent-warm-dark__1Nuye","button--accent-warm-darker":"Button_button--accent-warm-darker__1cOoV","button--success-lightest":"Button_button--success-lightest__2wUDb","button--success-lighter":"Button_button--success-lighter__2j8wQ","button--success-light":"Button_button--success-light__2aE0B","button--success":"Button_button--success__3vCMU","button--success-dark":"Button_button--success-dark__G5BI0","button--success-darker":"Button_button--success-darker__iR1cJ","button--info-lightest":"Button_button--info-lightest__2dM7_","button--info-lighter":"Button_button--info-lighter__3N_Vt","button--info-light":"Button_button--info-light__2MiYm","button--info":"Button_button--info__2smAM","button--info-dark":"Button_button--info-dark__26IIe","button--info-darker":"Button_button--info-darker__Gh1hS","button--warning-lightest":"Button_button--warning-lightest__3ALzN","button--warning-lighter":"Button_button--warning-lighter__372D9","button--warning-light":"Button_button--warning-light__qDy6U","button--warning":"Button_button--warning__3RIhA","button--warning-dark":"Button_button--warning-dark__3LFfO","button--warning-darker":"Button_button--warning-darker__JYMGP","button--error-lightest":"Button_button--error-lightest__3dK53","button--error-lighter":"Button_button--error-lighter__1iMHm","button--error-light":"Button_button--error-light__3SizE","button--error":"Button_button--error__3mR9r","button--error-dark":"Button_button--error-dark__3Q7ul","button--error-darker":"Button_button--error-darker__3UV_y","button--disabled-lightest":"Button_button--disabled-lightest__1ijlQ","button--disabled-light":"Button_button--disabled-light__2ceGa","button--disabled":"Button_button--disabled__3T0_E","button--disabled-dark":"Button_button--disabled-dark__-1HHP","button--mid-green":"Button_button--mid-green__2TurF","button--mid-blue":"Button_button--mid-blue__1QNpx","button--icon-app":"Button_button--icon-app__3Tz2h","button--icon-generic":"Button_button--icon-generic__YlhDR","button--icon-type":"Button_button--icon-type__k35QE","button--created":"Button_button--created__1tQgc","button--estimating":"Button_button--estimating__3y4VD","button--queued":"Button_button--queued__3FS55","button--running":"Button_button--running__3kPz5","button--completed":"Button_button--completed__zAYQj","button--terminated":"Button_button--terminated__2tKSS","button--does_not_exist":"Button_button--does_not_exist__3z4Im"}},67:function(e,t,n){e.exports={dropdown:"Dropdown_dropdown__QusLm"}},68:function(e,t,n){e.exports={table:"GenomeAttribs_table__7o5FU"}},79:function(e,t,n){},95:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),r=n(28),i=n.n(r),s=n(13),c=(n(79),n(39)),l=n.n(c),u=n(17);const d=()=>Object(s.d)(),b=s.e;var _=n(5);const j={pageTitle:document.title||"KBase",environment:"unknown"},m=Object(_.d)({name:"page",initialState:j,reducers:{setPageTitle:(e,t)=>{e.pageTitle=t.payload},setEnvironment:(e,t)=>{e.environment=t.payload}}});var p=m.reducer;const{setPageTitle:h,setEnvironment:v}=m.actions,g=e=>{const t=d();return Object(o.useEffect)((()=>(t(h(e)),document.title=e===j.pageTitle?j.pageTitle:`${j.pageTitle}${e?`: ${e}`:""}`,()=>{t(h(j.pageTitle)),document.title=j.pageTitle})),[t,e]),null};var x=n(20);const O={},f=async(e,t,n)=>{var o;const a=(e=>{if(!O[e])throw new Error(`Consumed service ${e} was not set prior to use.`);return O[e]})("serviceWizardApi").endpoints.serviceStatus,r={module_name:e,version:t},i=n.dispatch(a.initiate(r,{subscribe:!0,forceRefetch:300}));await i;const s=n.getState(),c=a.select(r)(s);if(c.isError)return{error:c.error};const l=null===(o=c.data)||void 0===o?void 0:o[0].url;return i.unsubscribe(),{url:l}};var y=n(52);const k="ci-europa",w=`https://${k}.kbase.us`,N=Object(y.a)({reducerPath:"combinedApi",baseQuery:(e=>{const t={...e,prepareHeaders:async(t,n)=>{e.prepareHeaders&&await e.prepareHeaders(t,n);const o=n.getState().auth.token;return o&&t.set("authorization",`${o}`),t}},n=Object(x.d)(t),o=async(t,a,r)=>{if("Http"===t.apiType){const o={...t,url:new URL([t.service.url,t.url].reduce(((e,t)=>(e.endsWith("/")?e:e+"/")+(t&&t.startsWith("/")?t.slice(1):t)),e.baseUrl||"")).toString()};return n(o,a,r)}if(void 0===t.service.url){const e=await f(t.service.name,t.service.release,a);return e.error?{error:e.error}:o({...t,service:{...t.service,url:e.url}},a,r)}const i=Math.random(),s={url:new URL(t.service.url,e.baseUrl).toString(),method:"POST",body:{version:"1.1",id:i,method:t.method,params:t.params},...t.fetchArgs},c=n(s,a,r),l=await c;if(l.error&&500===l.error.status&&(e=>{if("object"===typeof e&&null!==e&&["version","error","id"].every((t=>t in e))){const{version:t,error:n}=e;if("1.1"!==t)return!1;if("object"===typeof n&&null!==n&&["name","code","message"].every((e=>e in n)))return!0}return!1})(l.error.data))return l.error.data.id&&l.error.data.id!==i?{error:{status:"CUSTOM_ERROR",error:"JsonRpcProtocolError",data:`Response ID "${l.error.data.id}" !== Request ID "${i}"`}}:{error:{status:"JSONRPC_ERROR",data:l.error.data}};if(!l.data)return c;const u=l.data;return u.id&&u.id!==i?{error:{status:"CUSTOM_ERROR",error:"JsonRpcProtocolError",data:`Response ID "${u.id}" !== Request ID "${i}"`}}:{data:u.result}};return o})({baseUrl:w}),endpoints:()=>({})}),B=e=>t=>({apiType:"JsonRpc",service:e,...t}),S=e=>t=>({apiType:"Http",service:e,...t});function C(e){return e=(e=e.replace(/_/g," "))[0].toUpperCase()+e.slice(1)}function E(e,...t){let n="";const o=[...e];for(;o.length||t.length;)if(o.length&&(n+=o.shift()),t.length){const e=t.shift(),o=["string","boolean","number"].includes(typeof e)?e:String(e);n+=encodeURIComponent(o)}return n}const A=S({url:"/services/auth"}),T=N.injectEndpoints({endpoints:e=>({authFromToken:e.query({query:e=>A({url:"/api/V2/token",method:"GET",headers:{Authorization:e||""}})}),revokeToken:e.mutation({query:e=>A({url:E`/tokens/revoke/${e}`,method:"DELETE"})})})}),{authFromToken:P,revokeToken:L}=T.endpoints;function M(e){const t=document.cookie.split(";").map((e=>e.trim().split("="))).find((([t,n])=>t.trim()===e));return t?t[1]:void 0}function R(e,t,n){const{expires:o,path:a,domain:r,secure:i,SameSite:s}={path:"/",secure:!0,SameSite:"Lax",...n};let c=`${e}=${t}`;o&&(c+=`;expires=${o.toUTCString()}`),a&&(c+=`;path=${a}`),r&&(c+=`;domain=${r}`),s&&(c+=`;SameSite=${s}`),i&&(c+=";secure"),document.cookie=c}function q(e){const[t,n]=Object(o.useState)(M(e));Object(o.useEffect)((()=>{const o=setInterval((()=>{const o=M(e);o!==t&&n(o)}),100);return()=>clearInterval(o)}),[e,t,n]);const a=Object(o.useMemo)((()=>({clear:(...t)=>{const o=function(e,t){R(e,"",{...t,expires:new Date("Thu, 01 Jan 1970 00:00:00 GMT")})}(e,...t);return n(M(e)),o},set:(...t)=>{const o=R(e,...t);return n(M(e)),o}})),[e,n]);return[t,a.set,a.clear]}const I=Object(_.d)({name:"auth",initialState:{initialized:!1},reducers:{setAuth:(e,{payload:t})=>{const n=W(null===t||void 0===t?void 0:t.token);e.token=n,e.username=null===t||void 0===t?void 0:t.username,e.tokenInfo=null===t||void 0===t?void 0:t.tokenInfo,e.initialized=!0}},extraReducers:e=>e.addMatcher(L.matchFulfilled,((e,t)=>{var n;t.meta.arg.originalArgs===(null===(n=e.tokenInfo)||void 0===n?void 0:n.id)&&(e.token=void 0,e.username=void 0,e.tokenInfo=void 0)}))});var F=I.reducer;const{setAuth:D}=I.actions,G=e=>e.auth.username,Q=e=>e.auth.token,J=e=>e.auth.initialized,U=e=>{const t=d(),n=b(Q),a=W(e,""),r=P.useQuery(a,{skip:!a});return Object(o.useEffect)((()=>{r.isSuccess&&a!==n&&t(D({token:a,username:r.data.user,tokenInfo:r.data}))}),[n,t,a,r.data,r.isSuccess]),r};function W(e,t){return(null===e||void 0===e?void 0:e.toUpperCase().trim())||t}const z=B({url:"/services/user_profile/rpc"}),Y=N.enhanceEndpoints({addTagTypes:["Profile"]}).injectEndpoints({endpoints:e=>({userProfileStatus:e.query({query:()=>z({method:"UserProfile.status",params:[]})}),getUserProfile:e.query({query:({usernames:e})=>z({method:"UserProfile.get_user_profile",params:[e]}),keepUnusedDataFor:3600,providesTags:(e,t,{usernames:n})=>n.map((e=>({type:"Profile",id:e})))}),setUserProfile:e.mutation({query:({profile:e})=>z({method:"UserProfile.set_user_profile",params:[{profile:e}]}),invalidatesTags:(e,t,{profile:n})=>[{type:"Profile",id:n.user.username}]})})}),{getUserProfile:K,setUserProfile:Z,userProfileStatus:H}=Y.endpoints,X={loggedInProfile:void 0},V=Object(_.d)({name:"profile",initialState:X,reducers:{setLoggedInProfile:(e,t)=>{e.loggedInProfile=t.payload}}});var $=V.reducer;const{setLoggedInProfile:ee}=V.actions,te=({profile:e})=>{var t,n;return null===(t=e.loggedInProfile)||void 0===t||null===(n=t.user)||void 0===n?void 0:n.realname};var ne=n(69),oe=n(6),ae=n(66),re=n.n(ae),ie=n(1);const se=e=>{const t=[re.a.button,e.className].join(" ");return Object(ie.jsx)("button",{className:t,type:void 0,...e})};var ce=n(4),le=n(67),ue=n.n(le),de=n(55),be=n(71),_e=n(45),je=n.n(_e);const me=e=>{var t,n;const a=e.options,r=he(a),[i,s]=Object(o.useState)(r);Object(o.useEffect)((()=>{pe(a)||s(r)}),[a,r]);const c=[je.a["react-select"],null!==(t=e.className)&&void 0!==t?t:""];"right"===e.horizontalMenuAlign&&c.push(je.a["react-select--right"]);const l=(e=>t=>{null!==t&&e("value"in t?[t]:[...t])})(null!==(n=e.onChange)&&void 0!==n?n:()=>{}),u={className:c.join(" "),classNamePrefix:"react-select",components:e.components,formatOptionLabel:e=>Object(ie.jsxs)("span",{className:je.a.option_content,children:[i&&Object(ie.jsx)("span",{className:je.a.option_content_icon,children:e.icon}),e.label]}),isClearable:e.clearable,isDisabled:e.disabled,isMulti:e.multiple,onChange:l,value:e.value};return pe(a)?Object(ie.jsx)(be.a,{...u,loadOptions:async e=>{const t=await a(e);return s(he(t)),t},defaultOptions:!0}):Object(ie.jsx)(de.a,{...u,options:a})},pe=e=>"function"===typeof e,he=e=>!pe(e)&&e.some((e=>"options"in e?he(e.options):!!e.icon)),{DropdownIndicator:ve}=ce.q,ge=e=>{const t=e.children;return Object(ie.jsx)(me,{...e,value:null,className:[ue.a.dropdown,e.className].join(" "),components:{DropdownIndicator:e=>Object(ie.jsx)(ve,{...e,children:t})}})};var xe=n(3),Oe=n(11);function fe(e){if("status"in e){if("JSONRPC_ERROR"===e.status)return{message:e.data.error.message,code:e.data.error.code,name:e.data.error.name,status:e.status,error:e};return{message:"error"in e?e.error:JSON.stringify(e.data),status:e.status,error:e}}return{...e,message:e.message||"",error:e}}function ye(){g("Authentication");const{username:e,token:t}=b((e=>e.auth));return Object(ie.jsxs)("div",{children:[Object(ie.jsx)("p",{children:t?`You are logged in as '${e}'`:"You are not logged in"}),t?Object(ie.jsx)(we,{}):Object(ie.jsx)(ke,{}),Object(ie.jsx)("div",{children:Object(ie.jsx)(Ne,{})})]})}const ke=()=>{const[e,t]=Object(o.useState)(),[n,a]=P.useLazyQuery(),r=a.isError?fe(a.error).message:null;return Object(ie.jsxs)("div",{children:[Object(ie.jsx)("input",{placeholder:"kbase token",type:"text",value:null!==e&&void 0!==e?e:"",onChange:e=>t(e.target.value)}),Object(ie.jsx)(se,{onClick:()=>{e?n(e):alert("Please enter a kbase token")},children:"Login"}),r?Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)("br",{}),Object(ie.jsx)("span",{style:{color:"red"},children:r})]}):null]})},we=()=>{const e=b((({auth:e})=>{var t;return null===(t=e.tokenInfo)||void 0===t?void 0:t.id})),[t,n]=L.useMutation(),o=n.isError?fe(n.error).message:null;return Object(ie.jsxs)("div",{children:[Object(ie.jsx)(se,{onClick:()=>{e&&t(e)},children:"Logout of KBase"}),o?Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)("br",{}),Object(ie.jsx)("span",{style:{color:"red"},children:o})]}):null]})},Ne=()=>{var e;const t=b((e=>e.auth.username)),n=Object(o.useMemo)((()=>({usernames:t?[t]:[]})),[t]),a=K.useQuery(n,{skip:!t}),[r,i]=Z.useMutation(),[s,c]=Object(o.useState)("");if(!t)return Object(ie.jsx)(ie.Fragment,{});return a.error&&"status"in a.error&&"JSONRPC_ERROR"===a.error.status&&a.error.data.error.message.includes("Something"),Object(ie.jsxs)("div",{style:{maxWidth:"10em"},children:["Profile:",a.isSuccess?JSON.stringify(null===(e=a.data)||void 0===e?void 0:e[0][0]):a.isError?JSON.stringify(a.error):a.isLoading?Object(ie.jsx)(Oe.a,{icon:xe.I,spin:!0}):" ",Object(ie.jsx)("br",{}),Object(ie.jsx)("input",{type:"text",placeholder:"Change Realname",value:s,onInput:e=>c(e.currentTarget.value)}),Object(ie.jsx)("button",{onClick:()=>(async()=>{var e,t;null===(e=a.data)||void 0===e||e[0][0];const n=JSON.parse(JSON.stringify(null===(t=a.data)||void 0===t?void 0:t[0][0]));void 0!==n&&null!==n&&""!==s.trim()&&(n.user.realname=s.trim(),r({profile:n}))})(),children:"Update"}),i.isLoading?Object(ie.jsx)(Oe.a,{icon:xe.I,spin:!0}):null,i.isSuccess?Object(ie.jsx)(Oe.a,{icon:xe.m}):null,i.isError?Object(ie.jsx)(Oe.a,{icon:xe.R}):null]})},Be=Object(_.d)({name:"count",initialState:{count:0},reducers:{increment:e=>{e.count+=1}}});var Se=Be.reducer;const{increment:Ce}=Be.actions,Ee=e=>e.count.count,Ae=()=>{const e=b(Ee);return Object(ie.jsx)(ie.Fragment,{children:e})};function Te(){g("Count");const e=d();return Object(ie.jsxs)("section",{children:[Object(ie.jsxs)("h2",{children:["The count is: ",Object(ie.jsx)(Ae,{})]}),Object(ie.jsx)(se,{onClick:()=>{e(Ce())},children:"Add"})]})}function Pe(){const e=Object(oe.k)(),t=Object(oe.m)(),n=Object(o.useRef)(null),[a,r]=Object(o.useState)("");g(a);const i=Me(e.pathname+e.search+e.hash),[s,c]=Object(o.useState)(i),[l,u]=Object(o.useState)();return U(l),qe(n,(e=>{const n=e.data;if(De(n)){let e=n.payload.request.original;"/"===e[0]&&(e=e.slice(1)),s!==e&&(c(e),t(`./${e}`))}else Fe(n)?r(n.payload):Ge(n)&&n.payload.token&&u(n.payload.token)})),Object(o.useEffect)((()=>{var e;i!==s&&(null===(e=n.current)||void 0===e?void 0:e.contentWindow)&&n.current.contentWindow.postMessage({source:"europa.navigate",payload:{path:i}},"*")}),[i,n]),Object(ie.jsx)("div",{"data-testid":"legacy-iframe-wrapper",style:{display:"flex",width:"100%",height:"100%",flexFlow:"column nowrap"},children:Object(ie.jsx)("iframe",{frameBorder:"0",src:Re(s),ref:n,title:"Legacy Content Wrapper",width:"100%",height:"100%"})})}const Le=new RegExp("(?:/legacy)(?:/+(.*))$"),Me=e=>{var t;return(null===(t=e.match(Le))||void 0===t?void 0:t[1])||"/"},Re=e=>`https://legacy.ci-europa.kbase.us/#${e}`,qe=function(e,t){Object(o.useEffect)((()=>{const n=n=>{var o;n.source===(null===(o=e.current)||void 0===o?void 0:o.contentWindow)&&t(n)};return window.addEventListener("message",n),()=>{window.removeEventListener("message",n)}}),[t,e])},Ie=(e,t)=>n=>"object"===typeof n&&["source","payload"].every((e=>e in n))&&n.source===e&&t(n.payload),Fe=Ie("kbase-ui.ui.setTitle",(e=>"string"===typeof e)),De=Ie("kbase-ui.app.route-component",(e=>!!e&&"object"===typeof e&&"request"in e&&"object"===typeof e.request&&"original"in e.request&&"string"===typeof e.request.original)),Ge=Ie("kbase-ui.session.loggedin",(e=>!!e&&"object"===typeof e&&"token"in e&&("string"===typeof e.token||null===e.token)));function Qe(){return g("Narrative Navigator"),Object(ie.jsx)("section",{children:Object(ie.jsx)("h2",{children:"Nothing here yet"})})}var Je=()=>Object(ie.jsx)(ie.Fragment,{children:Object(ie.jsx)("section",{children:Object(ie.jsx)("h2",{children:"Page Not Found."})})}),Ue=n(14),We=n.n(Ue);var ze=({version:e,onVersionSelect:t})=>{const[n,a]=Object(o.useState)(e),r=Array(e).fill(null).map(((e,t)=>t+1)).reverse().map((e=>({options:[{value:e,icon:void 0,label:Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)("span",{children:"v"+e}),e===n&&Object(ie.jsx)(Oe.a,{icon:xe.m,style:{marginLeft:"3rem"}})]})}]})));return Object(ie.jsx)("div",{className:We.a.dropdown_wrapper,children:Object(ie.jsxs)(ge,{className:We.a.version_dropdown,horizontalMenuAlign:"right",options:r,onChange:e=>{return a((n=e)[0].value),void t(n[0].value);var n},children:[n===e?Object(ie.jsxs)("span",{children:["v",n]}):Object(ie.jsxs)("span",{children:["v",n," of ",e]}),Object(ie.jsx)(Oe.a,{icon:xe.j,style:{marginLeft:"5px"}})]})})},Ye=n(70);var Ke=({showVersionDropdown:e,onSelectItem:t,onUpaChange:n,active:a,item:r,idx:i})=>{const s=a?"active":"inactive",c=Ye.a(r.timestamp);return Object(o.useEffect)((()=>{if(a){const{access_group:e,obj_id:t,version:o}=r;null===n||void 0===n||n(`${e}/${t}/${o}`)}}),[a,r,n]),Object(ie.jsx)("section",{onClick:()=>function(e){null===t||void 0===t||t(e)}(i),children:Object(ie.jsx)("div",{className:`${We.a.narrative_item_outer} ${We.a[s]}`,children:Object(ie.jsxs)("div",{className:We.a.narrative_item_inner,children:[Object(ie.jsxs)("div",{className:We.a.narrative_item_text,children:[r.narrative_title||"Untitiled",e&&a&&Object(ie.jsx)(ze,{version:r.version,onVersionSelect:e=>function(e){const{access_group:t,obj_id:o}=r;null===n||void 0===n||n(`${t}/${o}/${e}`)}(e)})]}),Object(ie.jsxs)("div",{className:We.a.narrative_item_details,children:["Updated ",c," by ",r.creator]})]})})},i)};var Ze=function(e){var t;const[n,a]=Object(o.useState)(null!==(t=e.selectedIdx)&&void 0!==t?t:-1);return e.items.length?Object(ie.jsxs)(ie.Fragment,{children:[e.items.map(((t,o)=>Object(ie.jsx)(Ke,{item:t,idx:o,active:o===n,onSelectItem:e=>a(e),onUpaChange:t=>{var n;return null===(n=e.onSelectItem)||void 0===n?void 0:n.call(e,t)},showVersionDropdown:e.showVersionDropdown},o))),function(){const{itemsRemaining:t,hasMoreItems:n,loading:o,onLoadMoreItems:a}=e;return n?o?Object(ie.jsxs)("span",{className:We.a.list_footer,children:[Object(ie.jsx)(Oe.a,{icon:xe.o,spin:!0,style:{marginRight:"5px"}}),"Loading..."]}):Object(ie.jsxs)("span",{className:`${We.a.list_footer} ${We.a.link_action}`,onClick:a,children:["Load more (",t," remaining)"]}):Object(ie.jsx)("span",{className:We.a.list_footer,children:"No more results."})}()]}):e.loading?Object(ie.jsx)("div",{className:We.a.narrative_list_loading_outer,children:Object(ie.jsxs)("div",{className:We.a.narrative_list_loading_inner,children:[Object(ie.jsx)(Oe.a,{icon:xe.o,spin:!0,style:{marginRight:"5px"}}),"Loading..."]})}):Object(ie.jsx)("div",{className:We.a.narrative_list_loading_outer,children:Object(ie.jsx)("p",{className:We.a.narrative_list_loading_inner,children:"No results found."})})},He=n(46),Xe=n.n(He);const Ve=({realname:e,yours:t})=>t?Object(ie.jsx)("span",{children:"This table shows all of your narratives."}):Object(ie.jsxs)("span",{children:["This table shows all narratives owned by ",e," which are also accessible to you."]}),$e=()=>Object(ie.jsx)("div",{children:"Profile Resume"}),et=({realname:e,yours:t})=>Object(ie.jsxs)("div",{className:Xe.a.narratives,children:[Object(ie.jsx)(Ve,{realname:e,yours:t}),Object(ie.jsx)(Ze,{items:[],itemsRemaining:0,hasMoreItems:!1,loading:!1,showVersionDropdown:!0})]}),tt=({realname:e})=>Object(ie.jsxs)("div",{children:["Profile Infobox for ",e,"."]}),nt=({realname:e})=>Object(ie.jsxs)("div",{className:Xe.a.profile,children:[Object(ie.jsx)(tt,{realname:e}),Object(ie.jsx)($e,{})]}),ot=({narrativesLink:e,pageTitle:t,profileLink:n,realname:o,username:a,viewMine:r,viewNarratives:i})=>(g(t),Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)("nav",{className:Xe.a["profile-nav"],children:Object(ie.jsxs)("ul",{className:"links",children:[Object(ie.jsx)("li",{children:Object(ie.jsx)(u.b,{to:n,children:"Profile"})}),Object(ie.jsx)("li",{children:Object(ie.jsx)(u.b,{to:e,children:"Narratives"})})]})}),Object(ie.jsxs)("section",{className:Xe.a["profile-narratives"],children:[i?Object(ie.jsx)(et,{realname:o,yours:r}):Object(ie.jsx)(nt,{realname:o}),Object(ie.jsx)(se,{children:"Edit"})]})]}));var at=()=>{const e=Object(oe.k)(),{usernameRequested:t}=Object(oe.o)(),n=b(G),a="narratives"===t||void 0===t,r=t===n||a,i=n&&a?n:t,s=Object(o.useMemo)((()=>({usernames:[i||""]})),[i]),c=K.useQuery(s,{refetchOnMountOrArgChange:!0,skip:!i}),l="narratives"===e.pathname.split("/").slice(-1)[0];if(c.isError&&console.error("Error message: ",fe(null===c||void 0===c?void 0:c.error)),n){if(c.isLoading)return Object(ie.jsx)(ie.Fragment,{children:"Loading user profile."});if(c.isSuccess&&i&&c.data[0][0]){const e=c.data[0][0].user.realname,t=r?"My ":`${e}'s `,n=e?`${t} Profile`:"",o=r?"/profile/":`/profile/${i}`,a=r?"/profile/narratives":`/profile/${i}/narratives`;return Object(ie.jsx)(ot,{narrativesLink:a,pageTitle:n,profileLink:o,realname:e,username:i,viewMine:r,viewNarratives:l})}return Object(ie.jsx)(Je,{})}return Object(ie.jsx)(ie.Fragment,{children:"Loading authentication state."})};const rt=S({url:"services/collectionsservice"}),it=N.injectEndpoints({endpoints:e=>({collectionsStatus:e.query({query:()=>rt({method:"GET",url:"/"})}),listCollections:e.query({query:()=>rt({method:"GET",url:"/collections/"})}),getCollection:e.query({query:e=>rt({method:"GET",url:E`/collections/${e}/`})}),saveCollection:e.mutation({query:({id:e,ver_tag:t,...n})=>rt({method:"PUT",url:E`/collections/${e}/versions/${t}/`})}),activateVersion:e.mutation({query:({id:e,...t})=>rt({method:"PUT",url:"ver_num"in t?E`/collections/${e}/versions/num/${t.ver_num}/activate/`:E`/collections/${e}/versions/tag/${t.ver_tag}/activate/`})}),listTaxaCountRanks:e.query({query:({collection_id:e,load_ver_override:t})=>rt({method:"GET",url:E`/collections/${e}/taxa_count/ranks/`,params:t?{load_ver_override:t}:void 0})}),getTaxaCountRank:e.query({query:({collection_id:e,rank:t,load_ver_override:n})=>rt({method:"GET",url:E`/collections/${e}/taxa_count/counts/${t}/`,params:n?{load_ver_override:n}:void 0})}),getGenomeAttribs:e.query({query:({collection_id:e,...t})=>rt({method:"GET",url:E`/collections/${e}/genome_attribs/`,params:t})})})}),{collectionsStatus:st,listCollections:ct,getCollection:lt,saveCollection:ut,activateVersion:dt,listTaxaCountRanks:bt,getTaxaCountRank:_t,getGenomeAttribs:jt}=it.endpoints;var mt=n(24),pt=n.n(mt),ht=n(40),vt=n.n(ht);const gt=({title:e,subtitle:t,image:n,onClick:a,linkTo:r,selected:i,className:s})=>{const c=Object(oe.m)(),l=Object(o.useRef)(null),u=r?"link":a?"button":void 0,d=Object(o.useCallback)((e=>{a&&a(e),r&&c(r)}),[r,a,c]);let b=["card",u?"clickable":"",i?"selected":""].map((e=>vt.a[e])).join(" ");s&&(b+=`${s}`);const _=u?{role:u,tabIndex:0,"aria-pressed":i,onClick:d,onKeyDown:(e,...t)=>{var n;return[" ","Enter","Spacebar"].includes(e.key)&&d?null===l||void 0===l||null===(n=l.current)||void 0===n?void 0:n.click():null}}:void 0;return Object(ie.jsxs)("div",{className:b,ref:l,..._,"data-testid":"card",children:[n?Object(ie.jsx)("div",{className:vt.a["image-wrapper"],children:n}):null,Object(ie.jsxs)("div",{className:vt.a.body,children:[Object(ie.jsx)("div",{children:e}),t?Object(ie.jsx)("div",{className:vt.a.subtitle,children:t}):null]})]})},xt=({children:e,...t})=>Object(ie.jsx)("ol",{...t,"data-testid":"cardList",className:t.className+" "+vt.a["card-list"],children:o.Children.map(e,(e=>Object(ie.jsx)("li",{children:e})))});var Ot=n(26),ft=n.n(Ot);const yt=({collection_id:e})=>{var t;const n=Object(o.useMemo)((()=>({collection_id:e})),[e]),a=bt.useQuery(n),[r,i]=Object(o.useState)(),s=Object(o.useMemo)((()=>{var e;const t=(null===(e=a.data)||void 0===e?void 0:e.data.map((e=>({value:e,label:C(e)}))))||[];return i(null===t||void 0===t?void 0:t[0]),t}),[a.data]),c=Object(o.useMemo)((()=>({collection_id:e,rank:String(null===r||void 0===r?void 0:r.value)})),[e,null===r||void 0===r?void 0:r.value]),l=_t.useQuery(c,{skip:!r}),u=(null===(t=l.data)||void 0===t?void 0:t.data)||[],d=u.reduce(((e,{count:t})=>e>t?e:t),0);return a.isLoading||l.isLoading?Object(ie.jsx)(ie.Fragment,{children:"Loading..."}):Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)(me,{value:r,options:s,onChange:e=>i(e[0])}),Object(ie.jsx)("br",{}),Object(ie.jsxs)("div",{className:ft.a.figure,children:[Object(ie.jsx)("div",{className:ft.a["name-section"],children:u.map((({name:e})=>Object(ie.jsx)("div",{className:ft.a.name,children:e})))}),Object(ie.jsx)("div",{className:ft.a["bars-section"],children:u.map((({count:e})=>{const t=Math.round(e/d*1e4)/100;return Object(ie.jsxs)("div",{className:ft.a["bar-row"],children:[Object(ie.jsx)("div",{className:ft.a.bar,style:{width:`${t}%`},children:t>50?Object(ie.jsx)("div",{className:ft.a["label-light"],children:e}):null}),t<50?Object(ie.jsx)("div",{className:ft.a["label-dark"],children:e}):null]})}))})]})]})};var kt=n(27),wt=n(41),Nt=n.n(wt);const Bt=({data:e,columnDefs:t,className:n,pageSize:a=!1})=>{const[r,i]=Object(o.useState)([]),s=Tt(e[0]),c=t||s,l=Object(o.useMemo)((()=>{const e=Object(kt.createColumnHelper)();return c(e)}),[c]),u=Object(kt.useReactTable)({data:e,columns:l,state:{sorting:r},onSortingChange:i,getCoreRowModel:Object(kt.getCoreRowModel)(),getSortedRowModel:Object(kt.getSortedRowModel)(),getPaginationRowModel:Object(kt.getPaginationRowModel)()}),[d,b]=Object(o.useState)(!1);Object(o.useEffect)((()=>{const e=!!a&&a>0,t=e?a:Number.MAX_SAFE_INTEGER;u.setPageSize(t),b(e)}),[a,u]);const _=At("header",u.getFooterGroups()),j=At("footer",u.getFooterGroups());return Object(ie.jsxs)("div",{className:[n,Nt.a["table-container"]].join(" "),"data-testid":"table",children:[Object(ie.jsx)("div",{className:Nt.a["table-wrapper"],children:Object(ie.jsxs)("table",{children:[_?Object(ie.jsx)(Ct,{table:u}):void 0,Object(ie.jsx)("tbody",{children:u.getRowModel().rows.map((e=>Object(ie.jsx)("tr",{children:e.getVisibleCells().map((e=>Object(ie.jsx)("td",{children:Object(kt.flexRender)(e.column.columnDef.cell,e.getContext())},e.id)))},e.id)))}),j?Object(ie.jsx)(Et,{table:u}):void 0]})}),d?Object(ie.jsx)(St,{table:u}):void 0]})},St=({table:e})=>{const t=[],n=e.getState().pagination.pageIndex,o=e.getPageCount()-1;let a=Math.max(0,n-3),r=Math.min(o,n+3);n-a<3&&(r=Math.min(o,r+3+a-n)),r-n<3&&(a=Math.max(0,a-3+r-n));for(let i=a;i<=r;i++)t.push(i);return 0!==t[0]&&(t[0]=0,t[1]=Object(ie.jsx)(se,{disabled:!0,children:"..."},"etc-start")),t.unshift(Object(ie.jsx)(se,{disabled:!e.getCanPreviousPage(),onClick:()=>e.previousPage(),children:Object(ie.jsx)(Oe.a,{icon:xe.b})},"prev")),t[t.length-1]!==o&&(t[t.length-1]=o,t[t.length-2]=Object(ie.jsx)(se,{disabled:!0,children:"..."},"etc-end")),t.push(Object(ie.jsx)(se,{disabled:!e.getCanNextPage(),onClick:()=>e.nextPage(),children:Object(ie.jsx)(Oe.a,{icon:xe.c})},"next")),Object(ie.jsx)("div",{className:Nt.a.pagination,"data-testid":"pagination",children:t.map((t=>"number"===typeof t?Object(ie.jsx)(se,{disabled:t===n,onClick:()=>e.setPageIndex(t),children:t+1},t):t))})},Ct=({table:e})=>Object(ie.jsx)("thead",{children:e.getHeaderGroups().map((e=>Object(ie.jsx)("tr",{children:e.headers.map((e=>{var t;return Object(ie.jsxs)("th",{onClick:e.column.getToggleSortingHandler(),colSpan:e.colSpan,children:[!e.isPlaceholder&&e.column.getCanSort()?Object(ie.jsx)("span",{className:[Nt.a["sort-icon"],...e.column.getIsSorted()?[Nt.a["sort-icon--active"]]:[]].join(" "),children:Object(ie.jsx)(Oe.a,{icon:null!==(t={asc:xe.k,desc:xe.j}[e.column.getIsSorted()])&&void 0!==t?t:xe.G})}):null,e.isPlaceholder?null:Object(kt.flexRender)(e.column.columnDef.header,e.getContext())]},e.id)}))},e.id)))}),Et=({table:e})=>Object(ie.jsx)("tfoot",{children:e.getFooterGroups().map((e=>Object(ie.jsx)("tr",{children:e.headers.map((e=>Object(ie.jsx)("th",{colSpan:e.colSpan,children:e.isPlaceholder?null:Object(kt.flexRender)(e.column.columnDef.footer,e.getContext())},e.id)))},e.id)))}),At=(e,t)=>t.some((t=>t.headers.some((t=>t.getLeafHeaders().some((t=>void 0!==t.column.columnDef[e])))))),Tt=e=>Object(o.useMemo)((()=>t=>{if("object"===typeof e)return Array.isArray(e)?e.map(((e,n)=>t.accessor((e=>e[n]),{header:String(n)}))):Object.keys(e).map((e=>t.accessor(e,{header:String(e)})));throw new Error("Cannot automatically create columns from data, use the columnDefs prop")}),[e]);var Pt=n(68),Lt=n.n(Pt);const Mt=({collection_id:e})=>{const t=Object(o.useMemo)((()=>({collection_id:e})),[e]),{data:n}=jt.useQuery(t),a=Rt({fieldNames:null===n||void 0===n?void 0:n.fields.map((e=>e.name)),order:["genome_name","genome_size"]});return n?Object(ie.jsx)(Bt,{className:Lt.a.table,data:n.table,pageSize:8,columnDefs:a}):null},Rt=({fieldNames:e=[],order:t=[],exclude:n=[]})=>{const a={};e.forEach(((e,t)=>{a[e]=e=>e[t]}));const r=e.filter((e=>!n.includes(e))).sort(((n,o)=>{const a=t.indexOf(n),r=t.indexOf(o);return-1!==a&&-1!==r?a-r:-1!==a?-1:-1!==r?1:e.indexOf(n)-e.indexOf(o)}));return Object(o.useCallback)((e=>r.map((t=>e.accessor(a[t],{header:t.replace(/_/g," ").trim()})))),[JSON.stringify(e),JSON.stringify(r)])},qt=({dataProduct:e,collection_id:t})=>"taxa_count"===e.product?Object(ie.jsx)(yt,{collection_id:t}):"genome_attribs"===e.product?Object(ie.jsx)(Mt,{collection_id:t}):Object(ie.jsx)(ie.Fragment,{children:"'Invalid Data Product Type'"}),It=()=>{const{id:e}=Object(oe.o)(),t=lt.useQuery(e||"",{skip:void 0===e}).data;g("Data Collections");const[n,a]=Object(o.useState)();return Object(o.useEffect)((()=>{const e=null===t||void 0===t?void 0:t.data_products.find((e=>e.product===(null===n||void 0===n?void 0:n.product)&&e.version===(null===n||void 0===n?void 0:n.version)));a(e||void 0)}),[null===t||void 0===t?void 0:t.data_products,n]),t?Object(ie.jsxs)("div",{className:pt.a.collection_wrapper,children:[Object(ie.jsxs)("div",{className:pt.a.collection_detail,children:[Object(ie.jsxs)("div",{className:pt.a.detail_header,children:[Object(ie.jsx)("img",{src:t.icon_url,alt:`${t.name} collection icon`}),Object(ie.jsx)("span",{children:t.name})]}),Object(ie.jsx)("p",{children:t.desc}),Object(ie.jsx)("ul",{children:Object(ie.jsxs)("li",{children:["Version:"," ",Object(ie.jsxs)("strong",{children:["v",t.ver_num,": ",t.ver_tag]})]})})]}),Object(ie.jsxs)("div",{className:pt.a.data_products,children:[Object(ie.jsx)(xt,{className:pt.a.data_product_list,children:t.data_products.map((e=>Object(ie.jsx)(gt,{title:C(e.product),subtitle:e.version,onClick:()=>a(e),selected:n===e},e.product+"|"+e.version)))}),Object(ie.jsx)("div",{className:pt.a.data_product_detail,children:n?Object(ie.jsx)(qt,{dataProduct:n,collection_id:t.id}):Object(ie.jsx)("div",{className:pt.a.data_product_placeholder,children:Object(ie.jsx)("span",{children:"Select a Data Product"})})})]})]}):Object(ie.jsx)(ie.Fragment,{children:"loading..."})},Ft=()=>{var e;const t=Object(oe.m)();g("Data Collections");const n=ct.useQuery();return Object(ie.jsxs)("div",{className:pt.a.collection_wrapper,children:[Object(ie.jsx)("div",{children:"Some text explaining to users what they are looking at would go here. Between this and the list below, we may add search/sort/etc inputs. We may also add some sort of pagination at the bottom of the list."}),Object(ie.jsx)(xt,{children:n.isSuccess?null===(e=n.data)||void 0===e?void 0:e.data.map((e=>{const n=encodeURIComponent(e.id);return Object(ie.jsx)(gt,{title:e.name,subtitle:e.ver_tag,onClick:()=>t(n),image:Object(ie.jsx)("img",{src:e.icon_url,alt:`${e.name} collection icon`})},e.id)})):null})]})};function Dt(){return Object(ie.jsxs)(oe.d,{children:[Object(ie.jsx)(oe.b,{path:"/",element:Object(ie.jsx)(Ft,{})}),Object(ie.jsx)(oe.b,{path:"/:id",element:Object(ie.jsx)(It,{})}),Object(ie.jsx)(oe.b,{path:"*",element:Object(ie.jsx)("span",{children:"hmmm"})})]})}const Gt=({element:e})=>{const t=b((e=>e.auth.token)),n=Object(oe.k)();return t?Object(ie.jsx)(ie.Fragment,{children:e}):Object(ie.jsx)(oe.a,{to:"/legacy/login",replace:!0,state:{preLoginPath:n.pathname}})},Qt=()=>{const e=Object(oe.k)();return e.hash?Object(ie.jsx)(oe.a,{to:`/legacy/${e.hash.slice(1)}`,replace:!0}):Object(ie.jsx)(oe.a,{to:"/narratives",replace:!0})};var Jt=()=>Object(ie.jsx)(ie.Fragment,{children:Object(ie.jsxs)(oe.d,{children:[Object(ie.jsx)(oe.b,{path:"/legacy/*",element:Object(ie.jsx)(Pe,{})}),Object(ie.jsx)(oe.b,{path:"/profile/:usernameRequested/narratives",element:Object(ie.jsx)(Gt,{element:Object(ie.jsx)(at,{})})}),Object(ie.jsx)(oe.b,{path:"/profile/:usernameRequested",element:Object(ie.jsx)(Gt,{element:Object(ie.jsx)(at,{})})}),Object(ie.jsx)(oe.b,{path:"/profile",element:Object(ie.jsx)(Gt,{element:Object(ie.jsx)(at,{})})}),Object(ie.jsx)(oe.b,{path:"/count",element:Object(ie.jsx)(Gt,{element:Object(ie.jsx)(Te,{})})}),Object(ie.jsx)(oe.b,{path:"/auth",element:Object(ie.jsx)(ye,{})}),Object(ie.jsx)(oe.b,{path:"/narratives/:id/:obj/:ver",element:Object(ie.jsx)(Gt,{element:Object(ie.jsx)(Qe,{})})}),Object(ie.jsx)(oe.b,{path:"/narratives/:category",element:Object(ie.jsx)(Gt,{element:Object(ie.jsx)(Qe,{})})}),Object(ie.jsx)(oe.b,{path:"/narratives/:category/:id/:obj/:ver",element:Object(ie.jsx)(Qe,{})}),Object(ie.jsx)(oe.b,{path:"/narratives",element:Object(ie.jsx)(Gt,{element:Object(ie.jsx)(Qe,{})})}),Object(ie.jsx)(oe.b,{path:"/collections/*",element:Object(ie.jsx)(Dt,{})}),Object(ie.jsx)(oe.b,{path:"/",element:Object(ie.jsx)(Qt,{})}),Object(ie.jsx)(oe.b,{path:"*",element:Object(ie.jsx)(Je,{})})]})}),Ut=n(42),Wt=n.n(Ut);function zt(){return Object(ie.jsx)("nav",{children:Object(ie.jsxs)("ul",{className:Wt.a.nav_list,children:[Object(ie.jsx)(Yt,{path:"/",desc:"Navigator",icon:xe.p}),Object(ie.jsx)(Yt,{path:"/legacy/orgs",desc:"Orgs",icon:xe.P}),Object(ie.jsx)(Yt,{path:"/legacy/catalog/apps",desc:"Catalog",icon:xe.f}),Object(ie.jsx)(Yt,{path:"/legacy/search",desc:"Search",icon:xe.C}),Object(ie.jsx)(Yt,{path:"/legacy/jobbrowser",desc:"Jobs",icon:xe.K}),Object(ie.jsx)(Yt,{path:"/legacy/account",desc:"Account",icon:xe.w}),Object(ie.jsx)(Yt,{path:"/legacy/feeds",desc:"Feeds",icon:xe.h}),Object(ie.jsx)(Yt,{path:"/count",desc:"Count",icon:xe.s}),Object(ie.jsx)(Yt,{path:"/auth",desc:"Auth",icon:xe.s}),Object(ie.jsx)(Yt,{path:"/collections",desc:"Collections",icon:xe.g})]})})}const Yt=({path:e,desc:t,icon:n})=>{const o=Object(oe.k)();let a=Wt.a.nav_item;return o.pathname===e&&(a+=` ${Wt.a.active}`),Object(ie.jsx)("li",{className:a,children:Object(ie.jsxs)(u.b,{to:e,children:[Object(ie.jsx)(Oe.a,{className:Wt.a.nav_icon,icon:n}),Object(ie.jsx)("span",{className:Wt.a.nav_desc,children:t})]})},e)};var Kt=n(16),Zt=n.n(Kt);function Ht(){return Object(ie.jsxs)("header",{className:Zt.a.topbar,children:[Object(ie.jsx)("div",{className:Zt.a.topbar_item,children:Object(ie.jsx)(Vt,{})}),Object(ie.jsx)("div",{className:Zt.a.topbar_item,children:Object(ie.jsx)("img",{src:"data:image/png;base64,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",alt:""})}),Object(ie.jsx)("div",{className:[Zt.a.topbar_item,Zt.a.stretch].join(" "),children:Object(ie.jsx)($t,{})}),Object(ie.jsx)("div",{className:Zt.a.topbar_item,children:Object(ie.jsx)(en,{})}),Object(ie.jsx)("div",{className:Zt.a.topbar_item,children:Object(ie.jsx)(Xt,{})})]})}const Xt=()=>{const e=b(G),t=b(te),n=Object(oe.m)();return Object(ie.jsx)("div",{className:Zt.a.login_menu,children:Object(ie.jsx)(ge,{horizontalMenuAlign:"right",options:[{options:[{value:"",icon:void 0,label:Object(ie.jsxs)("div",{children:[Object(ie.jsx)("div",{children:t}),Object(ie.jsx)("div",{className:Zt.a.login_menu_username,children:e})]})}]},{options:[{value:"/profile",icon:Object(ie.jsx)(Oe.a,{icon:xe.O}),label:"Your Profile"},{value:"#your_account",icon:Object(ie.jsx)(Oe.a,{icon:xe.w}),label:"Your Account"}]},{options:[{value:"#sign_out",icon:Object(ie.jsx)(Oe.a,{icon:xe.E}),label:"Sign Out"}]}],onChange:e=>{(null===e||void 0===e?void 0:e[0])&&n(e[0].value)},children:Object(ie.jsxs)("div",{className:Zt.a.login_menu_button,children:[Object(ie.jsx)(Oe.a,{className:Zt.a.login_menu_icon,icon:xe.J}),Object(ie.jsx)(Oe.a,{icon:xe.H})]})})})},Vt=()=>Object(ie.jsx)("div",{className:Zt.a.hamburger_menu,children:Object(ie.jsx)(ge,{options:[{options:[{value:window.location.origin+"/#narrativemanager/start",icon:Object(ie.jsx)(Oe.a,{icon:xe.t}),label:"Narrative Interface"},{value:window.location.origin+"/#narrativemanager/new",icon:Object(ie.jsx)(Oe.a,{icon:xe.z}),label:"New Narrative"},{value:window.location.origin+"/#jgi-search",icon:Object(ie.jsx)(Oe.a,{icon:xe.C}),label:"JGI Search"},{value:window.location.origin+"/#biochem-search",icon:Object(ie.jsx)(Oe.a,{icon:xe.C}),label:"Biochem Search"}]},{options:[{value:window.location.origin+"/#about/services",icon:Object(ie.jsx)(Oe.a,{icon:xe.D}),label:"KBase Services Status"}]},{options:[{value:window.location.origin+"/#about",icon:Object(ie.jsx)(Oe.a,{icon:xe.x}),label:"About"},{value:"https://kbase.us/contact-us",icon:Object(ie.jsx)(Oe.a,{icon:xe.r}),label:"Contact KBase"},{value:"https://kbase.us/narrative-guide/",icon:Object(ie.jsx)(Oe.a,{icon:xe.A}),label:"Support"}]}],onChange:e=>{(null===e||void 0===e?void 0:e[0])&&(window.location.href=e[0].value)},children:Object(ie.jsx)(Oe.a,{className:Zt.a.hamburger_menu_icon,icon:xe.e})})}),$t=()=>{const e=b((e=>e.layout.pageTitle));return Object(ie.jsx)("div",{className:Zt.a.page_title,children:Object(ie.jsx)("span",{children:e||""})})},en=()=>{const e=b((e=>e.layout.environment));if("production"===e)return null;const t={ci:xe.u,"ci-europa":xe.u,unknown:xe.B,appdev:xe.Q}[e],n={ci:"CI","ci-europa":"EUR",unknown:"??",appdev:"APPDEV"}[e];return Object(ie.jsxs)("div",{className:Zt.a.environment,children:[Object(ie.jsx)("span",{children:n}),Object(ie.jsx)(Oe.a,{icon:t})]})};function tn({error:e,resetErrorBoundary:t}){return g("Something went wrong"),Object(ie.jsxs)("div",{role:"alert",children:[Object(ie.jsx)("pre",{children:e instanceof Error?e.toString():JSON.stringify(e)}),Object(ie.jsx)("button",{onClick:t,children:"Try again"})]})}const nn=()=>{const e=d();(e=>{const t=d(),[n,a,r]=q(e),{isSuccess:i,isFetching:s}=U(n),c=b(Q),l=b((({auth:e})=>{var t;return null===(t=e.tokenInfo)||void 0===t?void 0:t.expires})),u=b(J);Object(o.useEffect)((()=>{s||u||n&&i||t(D(null))}),[s,u,n,t,i]),Object(o.useEffect)((()=>{u&&(c&&l?a(c,{expires:new Date(l),domain:"ci-europa.kbase.us"}):c&&!l?console.error("Could not set token cookie, missing expire time"):c||r())}),[u,c,l,a,r])})("kbase_session");const t=b(G),n=b(J);return(e=>{const t=d(),n=Object(o.useMemo)((()=>({usernames:[e||""]})),[e]),a=K.useQuery(n,{skip:!e}),r=b((({profile:e})=>{var t,n;return null===e||void 0===e||null===(t=e.loggedInProfile)||void 0===t||null===(n=t.user)||void 0===n?void 0:n.username}));Object(o.useEffect)((()=>{if(a.isSuccess){if(!a.data||!a.data[0][0])throw a.error;a.isSuccess&&a.data[0][0].user.username!==r&&t(ee(a.data[0][0]))}}),[t,r,a.data,a.error,a.isSuccess])})(t),Object(o.useEffect)((()=>{e(v("ci-europa"))}),[e]),{isLoading:!n}};function on(){const{isLoading:e}=nn();return Object(ie.jsx)(u.a,{basename:"",children:Object(ie.jsxs)("div",{className:l.a.container,children:[Object(ie.jsx)("div",{className:l.a.topbar,children:Object(ie.jsx)(Ht,{})}),Object(ie.jsxs)("div",{className:l.a.site_content,children:[Object(ie.jsx)("div",{className:l.a.left_navbar,children:Object(ie.jsx)(zt,{})}),Object(ie.jsx)("div",{className:l.a.page_content,children:Object(ie.jsx)(ne.ErrorBoundary,{FallbackComponent:tn,children:e?"Loading...":Object(ie.jsx)(Jt,{})})})]})]})})}const an={assemblyinput:{color:"#F44336",icon:"icon icon-reads"},assembly:{color:"#920D58",icon:xe.a},chromatographymatrix:{color:"#E91E63",icon:xe.L},collection:{color:"#E91E63",icon:xe.y},contigset:{color:"#3F51B5",icon:xe.a},domainalignment:{color:"#000000",icon:xe.F},estimatekresult:{color:"#000000",icon:xe.l},expressionmatrix:{color:"#2196F3",icon:xe.M},expressionsample:{color:"#2196F3",icon:xe.v},expressionseries:{color:"#2196F3",icon:xe.v},fba:{color:"#673AB7",icon:"icon icon-metabolism"},fbamodel:{color:"#673AB7",icon:"icon icon-metabolism"},featureclusters:{color:"#AEEA00",icon:xe.N},featureset:{color:"#AEEA00",icon:xe.y},functionalmatrix:{color:"#000000",icon:xe.L},genome:{color:"#3F51B5",icon:"icon icon-genome"},genomeannotation:{color:"#920D58",icon:"icon icon-genome"},genomecomparison:{color:"#3F51B5",icon:"icon icon-compare"},genomeset:{color:"#3F51B5",icon:xe.y},heatmap:{color:"#795548",icon:xe.M},media:{color:"#795548",icon:xe.u},metagenome:{color:"#795548",icon:"icon icon-metagenome"},network:{color:"#795548",icon:xe.n},pairedendlibrary:{color:"#795548",icon:"icon icon-reads"},pangenome:{color:"#795548",icon:xe.i},phenotypeset:{color:"#795548",icon:xe.y},phenotypesimulationset:{color:"#795548",icon:xe.y},proteomecomparison:{color:"#795548",icon:xe.d},readsset:{color:"#795548",icon:"icon icon-reads"},referenceassembly:{color:"#795548",icon:xe.f},singleendlibrary:{color:"#795548",icon:"icon icon-reads"},taxonomicmatrix:{color:"#795548",icon:xe.L},taxon:{color:"#920D58",icon:xe.L},tree:{color:"#795548",icon:"icon icon-tree"}},rn=B({url:"/services/narrative_method_store/rpc"}),sn=N.injectEndpoints({endpoints:e=>({narrativeMethodStoreStatus:e.query({query:()=>rn({method:"NarrativeMethodStore.status",params:[]})}),getMethodBriefInfo:e.query({query:e=>rn({method:"NarrativeMethodStore.get_method_brief_info",params:e})})})}),{narrativeMethodStoreStatus:cn,getMethodBriefInfo:ln}=sn.endpoints;let un;!function(e){e.release="release",e.beta="beta",e.dev="dev"}(un||(un={}));const dn=e=>e in un,bn={appIconCache:{release:{},beta:{},dev:{}},typeIconInfos:an,defaultApp:{icon:xe.q,color:"#683AB7"},defaultType:{icon:xe.t,color:"#F44336"},loadingIcon:{icon:xe.I,color:"silver"}};var _n=Object(_.d)({name:"icons",initialState:bn,reducers:{},extraReducers:e=>e.addMatcher(ln.matchFulfilled,((e,{payload:t,meta:n})=>{const o=n.arg.originalArgs[0].ids,a=n.arg.originalArgs[0].ids;for(let s=0;s<o.length;s++){var r,i;const n=o[s],c=a[s],l=null===(r=t[s])||void 0===r||null===(i=r.icon)||void 0===i?void 0:i.url;n&&l&&dn(c)&&(e.appIconCache[c][n]={icon:`/services/narrative_method_store/${l}`,color:"silver"})}}))}).reducer;const jn=e=>Object(_.a)({devTools:!0,reducer:{auth:F,count:Se,icons:_n,layout:p,profile:$,[N.reducerPath]:N.reducer},middleware:e=>e().concat(N.middleware),...e}),mn=jn();var pn=e=>{e&&e instanceof Function&&n.e(3).then(n.bind(null,96)).then((({getCLS:t,getFID:n,getFCP:o,getLCP:a,getTTFB:r})=>{t(e),n(e),o(e),a(e),r(e)}))};i.a.render(Object(ie.jsx)(a.a.StrictMode,{children:Object(ie.jsx)(s.a,{store:mn,children:Object(ie.jsx)(on,{})})}),document.getElementById("root")),pn()}},[[95,1,2]]]);
//# sourceMappingURL=main.1742a1ed.chunk.js.map