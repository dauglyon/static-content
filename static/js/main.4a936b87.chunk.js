(this["webpackJsonpui-refresh-test"]=this["webpackJsonpui-refresh-test"]||[]).push([[0],{10:function(t,e,n){t.exports={narrative_item_outer:"NarrativeList_narrative_item_outer__3XkM1",active:"NarrativeList_active__2G5K3",dropdown_wrapper:"NarrativeList_dropdown_wrapper__2_oyM",narrative_list_loading_outer:"NarrativeList_narrative_list_loading_outer__zqT8m",narrative_list_loading_inner:"NarrativeList_narrative_list_loading_inner__3N79j",list_footer:"NarrativeList_list_footer__2Ggnp",link_action:"NarrativeList_link_action__2VmhV",narrative_item_inner:"NarrativeList_narrative_item_inner__23b-O",narrative_item:"NarrativeList_narrative_item__KaFOE",narrative_item_text:"NarrativeList_narrative_item_text__2A5DR",narrative_item_details:"NarrativeList_narrative_item_details__1z0Jn",version_dropdown:"NarrativeList_version_dropdown__lMW5h"}},103:function(t,e,n){"use strict";n.r(e);var o=n(0),r=n.n(o),a=n(21),i=n.n(a),c=n(35),s=(n(76),n(36)),l=n.n(s),u=n(20),d=n(11);const _={pageTitle:void 0,environment:"unknown"},b=Object(d.c)({name:"page",initialState:_,reducers:{setPageTitle:(t,e)=>{t.pageTitle=e.payload},setEnvironment:(t,e)=>{t.environment=e.payload}}});var j=b.reducer;const{setPageTitle:p,setEnvironment:h}=b.actions,m=()=>Object(c.b)(),g=c.c,v=document.title,x=t=>{const e=m();return Object(o.useEffect)((()=>(e(p(t)),document.title="KBase"+(void 0!==t?`: ${t}`:""),()=>{e(p(void 0)),document.title=v})),[e,t]),null},O="https://ci-europa.kbase.us/services/auth",f={pending:!1},B=Object(d.b)("auth/authFromToken",(async t=>{let e;try{e=await fetch(`${O}/api/V2/token`,{method:"GET",headers:{Authorization:t||""}})}catch(n){throw console.error("Authentication Error."),n}if("undefined"===typeof e||!e.ok){let t=e.statusText;try{t+=`: ${(await e.json()).error.message}`}catch(n){throw console.error("Error processing error message."),n}throw new Error(`Failed to validate token: "${t}"`)}return{token:t,tokenInfo:await e.json()}})),w=Object(d.b)("auth/revokeCurrentToken",(async(t,e)=>{var n;const o=null===(n=e.getState().auth._tokenInfo)||void 0===n?void 0:n.id,r=e.getState().auth.token;if(!o||!r)throw new Error("Failed to revoke token: No token to revoke");const a=await fetch(`${O}/tokens/revoke/${o}`,{method:"DELETE",headers:{Authorization:r||""}});if(!a.ok)throw new Error(`Failed to revoke token: ${a.statusText}`)}));var k=Object(d.c)({name:"auth",initialState:f,reducers:{},extraReducers:t=>t.addCase(B.pending,(t=>{t.error=void 0,t.pending=!0})).addCase(B.fulfilled,((t,e)=>{t.token=e.payload.token,t.username=e.payload.tokenInfo.user,t._tokenInfo=e.payload.tokenInfo,t.pending=!1})).addCase(B.rejected,((t,e)=>{t.error=e.error.message,t.username=void 0,t._tokenInfo=void 0,t.pending=!1})).addCase(w.pending,(()=>{})).addCase(w.fulfilled,(()=>f)).addCase(w.rejected,(()=>{}))}).reducer;const y=t=>t.auth?t.auth.username:null;var N=n(9),A=n(64),E=n.n(A),S=n(1);const C=t=>{const e=[E.a.button,t.className].join(" ");return Object(S.jsx)("button",{className:e,type:void 0,...t})};var I=n(3),L=n(65),T=n.n(L),F=n(50),P=n(68),q=n(37),M=n.n(q);const D=t=>{var e,n;const r=t.options,a=Y(r),[i,c]=Object(o.useState)(a);Object(o.useEffect)((()=>{K(r)||c(a)}),[r,a]);const s=[M.a["react-select"],null!==(e=t.className)&&void 0!==e?e:""];"right"===t.horizontalMenuAlign&&s.push(M.a["react-select--right"]);const l=null!==(n=t.onChange)&&void 0!==n?n:()=>{},u={className:s.join(" "),classNamePrefix:"react-select",components:t.components,formatOptionLabel:t=>Object(S.jsxs)("span",{className:M.a.option_content,children:[i&&Object(S.jsx)("span",{className:M.a.option_content_icon,children:t.icon}),t.label]}),isClearable:t.clearable,isDisabled:t.disabled,isMulti:t.multiple,onChange:t=>{l(t&&"value"in t?[t]:t?[...t]:[])},value:t.value};return K(r)?Object(S.jsx)(P.a,{...u,loadOptions:async t=>{const e=await r(t);return c(Y(e)),e},defaultOptions:!0}):Object(S.jsx)(F.a,{...u,options:r})},K=t=>"function"===typeof t,Y=t=>!K(t)&&t.some((t=>"options"in t?Y(t.options):!!t.icon)),{DropdownIndicator:Q}=I.q,R=t=>{const e=t.children;return Object(S.jsx)(D,{...t,value:null,className:[T.a.dropdown,t.className].join(" "),components:{DropdownIndicator:t=>Object(S.jsx)(Q,{...t,children:e})}})};var G=n(34);const W="https://CI.kbase.us",z={UserProfile:`${W}/services/user_profile/rpc`,NarrativeMethodStore:`${W}/services/narrative_method_store/rpc`},Z=(t,e)=>new G.KBaseServiceClient({module:t,url:z[t],authToken:e});function X(){x("Authentication");const{username:t,token:e,error:n,pending:r}=g((t=>t.auth));return Object(o.useEffect)((()=>{(async()=>{if(await new Promise((t=>setTimeout(t,1e3))),!e)return;const n=Z("UserProfile",e),o=await n.call("get_user_profile",[[t]]);console.log({profile:o})})()}),[e,t]),Object(S.jsxs)("div",{children:[Object(S.jsx)("p",{children:e?`You are logged in as '${t}'`:"You are not logged in"}),r?Object(S.jsx)("p",{children:"Please wait..."}):e?Object(S.jsx)(J,{}):Object(S.jsx)(H,{}),n?Object(S.jsx)("span",{style:{color:"red"},children:n}):null]})}const H=()=>{const t=m(),[e,n]=Object(o.useState)();return Object(S.jsxs)("div",{children:[Object(S.jsx)("input",{placeholder:"kbase token",type:"text",value:null!==e&&void 0!==e?e:"",onChange:t=>n(t.target.value)}),Object(S.jsx)(C,{onClick:()=>{e?t(B(e)):alert("Please enter a kbase token")},children:"Login"})]})},J=()=>{const t=m();return Object(S.jsx)("div",{children:Object(S.jsx)(C,{onClick:()=>t(w()),children:"Logout of KBase"})})},V=Object(d.c)({name:"count",initialState:{count:0},reducers:{increment:t=>{t.count+=1}}});var U=V.reducer;const{increment:$}=V.actions,tt=t=>t.count.count,et=()=>{const t=g(tt);return Object(S.jsx)(S.Fragment,{children:t})};function nt(){x("Count");const t=m();return Object(S.jsxs)("section",{children:[Object(S.jsxs)("h2",{children:["The count is: ",Object(S.jsx)(et,{})]}),Object(S.jsx)(C,{onClick:()=>{t($())},children:"Add"})]})}function ot(){var t;const e=Object(N.f)(),n=Object(o.useRef)(null),r=null===n||void 0===n||null===(t=n.current)||void 0===t?void 0:t.contentWindow,a=rt(e.location.pathname)+e.location.hash,[i,c]=Object(o.useState)(a),[s,l]=Object(o.useState)(a),[u,d]=Object(o.useState)(!1),[_,b]=Object(o.useState)("0");return Object(o.useEffect)((()=>{const t=setInterval((()=>{var t,o,r;if(!at(null===(t=n.current)||void 0===t?void 0:t.contentWindow))return d(!0),void alert("Something went wrong: Could not load external link within legacy page iframe.");d(!1);const a=null===(o=n.current)||void 0===o||null===(r=o.contentWindow)||void 0===r?void 0:r.location,i=window.location;let u=!1;if(a&&"blank"!==a.pathname){var j,p;const t=a.pathname+(null!==(j=a.hash)&&void 0!==j?j:""),o=rt(i.pathname)+(null!==(p=i.hash)&&void 0!==p?p:"");t!==s?(l(t),u=!0,e.push(`/legacy${t}`)):o!==s&&(l(o),c(o),n.current.src=o,u=!0)}b(st(n.current,u,_))}),200);return()=>{clearInterval(t)}}),[e,n,s,_]),it(r),u?null:Object(S.jsx)("iframe",{style:{overflowY:"hidden"},frameBorder:"0",src:i,ref:n,title:"Legacy Content",width:"100%",height:_})}const rt=t=>{var e;return(null===(e=t.match(/(?:\/legacy)+(\/.*)$/))||void 0===e?void 0:e[1])||"/"},at=t=>{try{null===t||void 0===t||t.document}catch(e){return!1}return!0},it=t=>{Object(o.useEffect)((()=>{if(!t)return;const e=setInterval((()=>{const e=[t],n=[];for(;e.length>0;){const t=e.pop();if(at(t)){if(t.frames.length>0)for(let n=0;n<t.frames.length;n++)e.push(t.frames[n]);n.push(t)}}n.forEach((t=>{"complete"===t.document.readyState?ct(t):t.addEventListener("load",(()=>{ct(t)}))}))}),200);return()=>clearInterval(e)}),[t])},ct=t=>{(t.document.head.querySelector("base")||t.document.head.appendChild(t.document.createElement("base"))).setAttribute("target","_top")},st=(t,e,n)=>{var o;const r=null===t||void 0===t||null===(o=t.contentWindow)||void 0===o?void 0:o.document.body,a=null===r||void 0===r?void 0:r.scrollHeight.toString();if(t&&a&&(e||a!==n)){var i;const e=window.scrollY;t.height=(window.innerHeight-((null===(i=t.parentElement)||void 0===i?void 0:i.getBoundingClientRect().top)||0)-4).toString();const n=(null===r||void 0===r?void 0:r.scrollHeight.toString())||a;return t.height=n,window.scrollTo(0,e),n}return n};function lt(){return x("Narrative Navigator"),Object(S.jsx)("section",{children:Object(S.jsx)("h2",{children:"Nothing here yet"})})}function ut(){return Object(S.jsx)("section",{children:Object(S.jsx)("h2",{children:"Page Not Found."})})}var dt=n(10),_t=n.n(dt),bt=n(8),jt=n(4);var pt=({version:t,onVersionSelect:e})=>{const[n,r]=Object(o.useState)(t),a=Array(t).fill(null).map(((t,e)=>e+1)).reverse().map((t=>({options:[{value:t,icon:void 0,label:Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("span",{children:"v"+t}),t===n&&Object(S.jsx)(bt.a,{icon:jt.i,style:{marginLeft:"3rem"}})]})}]})));return Object(S.jsx)("div",{className:_t.a.dropdown_wrapper,children:Object(S.jsxs)(R,{className:_t.a.version_dropdown,horizontalMenuAlign:"right",options:a,onChange:t=>{return r((n=t)[0].value),void e(n[0].value);var n},children:[n===t?Object(S.jsxs)("span",{children:["v",n]}):Object(S.jsxs)("span",{children:["v",n," of ",t]}),Object(S.jsx)(bt.a,{icon:jt.g,style:{marginLeft:"5px"}})]})})},ht=n(67);var mt=({showVersionDropdown:t,onSelectItem:e,onUpaChange:n,active:r,item:a,idx:i})=>{const c=r?"active":"inactive",s=ht.a(a.timestamp);return Object(o.useEffect)((()=>{if(r){const{access_group:t,obj_id:e,version:o}=a;null===n||void 0===n||n(`${t}/${e}/${o}`)}}),[r,a,n]),Object(S.jsx)("section",{onClick:()=>function(t){null===e||void 0===e||e(t)}(i),children:Object(S.jsx)("div",{className:`${_t.a.narrative_item_outer} ${_t.a[c]}`,children:Object(S.jsxs)("div",{className:_t.a.narrative_item_inner,children:[Object(S.jsxs)("div",{className:_t.a.narrative_item_text,children:[a.narrative_title||"Untitiled",t&&r&&Object(S.jsx)(pt,{version:a.version,onVersionSelect:t=>function(t){const{access_group:e,obj_id:o}=a;null===n||void 0===n||n(`${e}/${o}/${t}`)}(t)})]}),Object(S.jsxs)("div",{className:_t.a.narrative_item_details,children:["Updated ",s," by ",a.creator]})]})})},i)};var gt=function(t){var e;const[n,r]=Object(o.useState)(null!==(e=t.selectedIdx)&&void 0!==e?e:-1);return t.items.length?Object(S.jsxs)(S.Fragment,{children:[t.items.map(((e,o)=>Object(S.jsx)(mt,{item:e,idx:o,active:o===n,onSelectItem:t=>r(t),onUpaChange:e=>{var n;return null===(n=t.onSelectItem)||void 0===n?void 0:n.call(t,e)},showVersionDropdown:t.showVersionDropdown},o))),function(){const{itemsRemaining:e,hasMoreItems:n,loading:o,onLoadMoreItems:r}=t;return n?o?Object(S.jsxs)("span",{className:_t.a.list_footer,children:[Object(S.jsx)(bt.a,{icon:jt.k,spin:!0,style:{marginRight:"5px"}}),"Loading..."]}):Object(S.jsxs)("span",{className:`${_t.a.list_footer} ${_t.a.link_action}`,onClick:r,children:["Load more (",e," remaining)"]}):Object(S.jsx)("span",{className:_t.a.list_footer,children:"No more results."})}()]}):t.loading?Object(S.jsx)("div",{className:_t.a.narrative_list_loading_outer,children:Object(S.jsxs)("div",{className:_t.a.narrative_list_loading_inner,children:[Object(S.jsx)(bt.a,{icon:jt.k,spin:!0,style:{marginRight:"5px"}}),"Loading..."]})}):Object(S.jsx)("div",{className:_t.a.narrative_list_loading_outer,children:Object(S.jsx)("p",{className:_t.a.narrative_list_loading_inner,children:"No results found."})})};const vt=({profile:t})=>t.cache,xt=Object(d.b)("profile/loadProfile",(async({token:t,username:e},{getState:n,rejectWithValue:o})=>{if(!e)throw new Error("No username specified.");const r=vt(n());if(e in r)return{profile:r[e]};let a;try{a=await(async(t,e)=>{const n=new G.KBaseServiceClient({module:"UserProfile",url:"https://ci.kbase.us/services/user_profile/rpc",authToken:t});return await n.call("get_user_profile",[e])})(t,[e])}catch(c){if(c instanceof G.KBaseJsonRpcError)throw new Error("Error contacting KBase services.");throw c}const i=a[0];return i?{profile:i}:Promise.reject(o({username:e,error:`Username '${e}' does not exist.`}))})),Ot=Object(d.c)({name:"profile",initialState:{cache:{},error:"",pending:!1,realname:"",usernameSelected:null},reducers:{clearError:t=>{t.error=""},selectUsername:(t,e)=>{t.usernameSelected=e.payload}},extraReducers:t=>t.addCase(xt.pending,(t=>{t.error="",t.pending=!0})).addCase(xt.fulfilled,((t,e)=>{const{profile:n}=e.payload,{user:o}=n;t.realname=o.realname,t.usernameSelected=o.username;const r={[t.usernameSelected]:n,...t.cache};t.cache=r,t.pending=!1})).addCase(xt.rejected,((t,e)=>{const n=e.payload;t.pending=!1,t.usernameSelected=null;const o=e.error&&e.error.message?e.error.message:"Error loading profile.";if(!n)return void(t.error=o);const r=n.username;t.cache[r]=(t=>({profile:{user:{username:t,realname:""},profile:{}}}))(r).profile,t.error=`Error loading profile for ${r}.`,t.realname=""}))});var ft=Ot.reducer;const{clearError:Bt,selectUsername:wt}=Ot.actions,kt=({profile:t})=>t.error,yt=({profile:t})=>t.realname,Nt=({profile:t})=>t.usernameSelected;var At=n(38),Et=n.n(At);const St=({realname:t,yours:e})=>e?Object(S.jsx)("span",{children:"This table shows all of your narratives."}):Object(S.jsxs)("span",{children:["This table shows all narratives owned by ",t," which are also accessible to you."]}),Ct=()=>Object(S.jsx)("div",{children:"Profile Resume"}),It=({realname:t,yours:e})=>Object(S.jsxs)("div",{className:Et.a.narratives,children:[Object(S.jsx)(St,{realname:t,yours:e}),Object(S.jsx)(gt,{items:[],itemsRemaining:0,hasMoreItems:!1,loading:!1,showVersionDropdown:!0})]}),Lt=({realname:t})=>Object(S.jsxs)("div",{children:["Profile Infobox for ",t,"."]}),Tt=({realname:t})=>Object(S.jsxs)("div",{className:Et.a.profile,children:[Object(S.jsx)(Lt,{realname:t}),Object(S.jsx)(Ct,{})]}),Ft=({narrativesLink:t,pageTitle:e,profileLink:n,realname:o,username:r,viewMine:a,viewNarratives:i})=>(x(e),Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("nav",{className:Et.a["profile-nav"],children:Object(S.jsxs)("ul",{className:"links",children:[Object(S.jsx)("li",{children:Object(S.jsx)(u.b,{to:n,children:"Profile"})}),Object(S.jsx)("li",{children:Object(S.jsx)(u.b,{to:t,children:"Narratives"})})]})}),Object(S.jsxs)("section",{className:Et.a["profile-narratives"],children:[i?Object(S.jsx)(It,{realname:o,yours:a}):Object(S.jsx)(Tt,{realname:o}),Object(S.jsx)(C,{children:"Edit"})]})]}));var Pt=()=>{const t=m(),e=g(vt),n=g(kt),o=g((t=>t.auth.token)),r=g(y),a=o||"",i="narratives"===Object(N.g)().pathname.split("/").slice(-1)[0],{usernameRequested:c}=Object(N.h)(),s="narratives"===c||void 0===c,l=c===r||s,u=r&&s?r:c;if(g(Nt)!==u)return t(wt(u)),Object(S.jsx)(S.Fragment,{children:"Loading"});if(n)return console.error(`Error message: ${n}`),t(Bt()),Object(S.jsx)(ut,{});if(!r)return Object(S.jsx)(S.Fragment,{children:"Loading authentication state."});const d=s?r:u;d in e||t(xt({token:a,username:d}));const _=e[d];if(!_)return Object(S.jsx)(S.Fragment,{children:"Loading user profile."});const b=_.user.realname,j=b?`${l?"My ":`${b}'s `} Profile`:"",p=l?"/profile/":`/profile/${u}`,h=l?"/profile/narratives":`/profile/${u}/narratives`;return Object(S.jsx)(Ft,{narrativesLink:h,pageTitle:j,profileLink:p,realname:b,username:u,viewMine:l,viewNarratives:i})};var qt=()=>Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)(N.c,{children:[Object(S.jsx)(N.a,{path:"/legacy/*",children:Object(S.jsx)(ot,{})}),Object(S.jsx)(N.a,{path:"/profile/:usernameRequested/narratives",children:Object(S.jsx)(Pt,{})}),Object(S.jsx)(N.a,{path:"/profile/:usernameRequested",children:Object(S.jsx)(Pt,{})}),Object(S.jsx)(N.a,{path:"/profile",children:Object(S.jsx)(Pt,{})}),Object(S.jsx)(N.a,{path:"/count",children:Object(S.jsx)(nt,{})}),Object(S.jsx)(N.a,{path:"/auth",children:Object(S.jsx)(X,{})}),Object(S.jsx)(N.a,{exact:!0,path:"/",children:Object(S.jsx)(lt,{})}),Object(S.jsx)(N.a,{path:"*",children:Object(S.jsx)(ut,{})})]})}),Mt=n(31),Dt=n.n(Mt);function Kt(){return Object(S.jsx)("nav",{children:Object(S.jsxs)("ul",{className:Dt.a.nav_list,children:[Object(S.jsx)(Yt,{path:"/",desc:"Navigator",icon:jt.l}),Object(S.jsx)(Yt,{path:"/orgs",desc:"Orgs",icon:jt.K}),Object(S.jsx)(Yt,{path:"/catalog",desc:"Catalog",icon:jt.d}),Object(S.jsx)(Yt,{path:"/search",desc:"Search",icon:jt.y}),Object(S.jsx)(Yt,{path:"/jobs",desc:"Jobs",icon:jt.F}),Object(S.jsx)(Yt,{path:"/account",desc:"Account",icon:jt.s}),Object(S.jsx)(Yt,{path:"/feeds",desc:"Feeds",icon:jt.e}),Object(S.jsx)(Yt,{path:"/count",desc:"Count",icon:jt.o}),Object(S.jsx)(Yt,{path:"/auth",desc:"Auth",icon:jt.o})]})})}const Yt=({path:t,desc:e,icon:n})=>{const o=Object(N.g)();let r=Dt.a.nav_item;return o.pathname===t&&(r+=` ${Dt.a.active}`),Object(S.jsx)("li",{className:r,children:Object(S.jsxs)(u.b,{to:t,children:[Object(S.jsx)(bt.a,{className:Dt.a.nav_icon,icon:n}),Object(S.jsx)("span",{className:Dt.a.nav_desc,children:e})]})},t)};var Qt=n(15),Rt=n.n(Qt);function Gt(){return Object(S.jsxs)("header",{className:Rt.a.topbar,children:[Object(S.jsx)("div",{className:Rt.a.topbar_item,children:Object(S.jsx)(zt,{})}),Object(S.jsx)("div",{className:Rt.a.topbar_item,children:Object(S.jsx)("img",{src:"data:image/png;base64,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",alt:""})}),Object(S.jsx)("div",{className:[Rt.a.topbar_item,Rt.a.stretch].join(" "),children:Object(S.jsx)(Zt,{})}),Object(S.jsx)("div",{className:Rt.a.topbar_item,children:Object(S.jsx)(Xt,{})}),Object(S.jsx)("div",{className:Rt.a.topbar_item,children:Object(S.jsx)(Wt,{})})]})}const Wt=()=>{const t=g(y),e=g(yt),n=Object(N.f)();return Object(S.jsx)("div",{className:Rt.a.login_menu,children:Object(S.jsx)(R,{horizontalMenuAlign:"right",options:[{options:[{value:"",icon:void 0,label:Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{children:e}),Object(S.jsx)("div",{className:Rt.a.login_menu_username,children:t})]})}]},{options:[{value:"/profile",icon:Object(S.jsx)(bt.a,{icon:jt.J}),label:"Your Profile"},{value:"#your_account",icon:Object(S.jsx)(bt.a,{icon:jt.s}),label:"Your Account"}]},{options:[{value:"#sign_out",icon:Object(S.jsx)(bt.a,{icon:jt.A}),label:"Sign Out"}]}],onChange:t=>{(null===t||void 0===t?void 0:t[0])&&n.push(t[0].value)},children:Object(S.jsxs)("div",{className:Rt.a.login_menu_button,children:[Object(S.jsx)(bt.a,{className:Rt.a.login_menu_icon,icon:jt.E}),Object(S.jsx)(bt.a,{icon:jt.C})]})})})},zt=()=>Object(S.jsx)("div",{className:Rt.a.hamburger_menu,children:Object(S.jsx)(R,{options:[{options:[{value:window.location.origin+"/#narrativemanager/start",icon:Object(S.jsx)(bt.a,{icon:jt.p}),label:"Narrative Interface"},{value:window.location.origin+"/#narrativemanager/new",icon:Object(S.jsx)(bt.a,{icon:jt.v}),label:"New Narrative"},{value:window.location.origin+"/#jgi-search",icon:Object(S.jsx)(bt.a,{icon:jt.y}),label:"JGI Search"},{value:window.location.origin+"/#biochem-search",icon:Object(S.jsx)(bt.a,{icon:jt.y}),label:"Biochem Search"}]},{options:[{value:window.location.origin+"/#about/services",icon:Object(S.jsx)(bt.a,{icon:jt.z}),label:"KBase Services Status"}]},{options:[{value:window.location.origin+"/#about",icon:Object(S.jsx)(bt.a,{icon:jt.t}),label:"About"},{value:"https://kbase.us/contact-us",icon:Object(S.jsx)(bt.a,{icon:jt.n}),label:"Contact KBase"},{value:"https://kbase.us/narrative-guide/",icon:Object(S.jsx)(bt.a,{icon:jt.w}),label:"Support"}]}],onChange:t=>{(null===t||void 0===t?void 0:t[0])&&(window.location.href=t[0].value)},children:Object(S.jsx)(bt.a,{className:Rt.a.hamburger_menu_icon,icon:jt.c})})}),Zt=()=>{const t=g((t=>t.layout.pageTitle));return Object(S.jsx)("div",{className:Rt.a.page_title,children:Object(S.jsx)("span",{children:t||""})})},Xt=()=>{const t=g((t=>t.layout.environment));if("production"===t)return null;const e={ci:jt.q,unknown:jt.x,appdev:jt.L}[t],n={ci:"CI",unknown:"??",appdev:"APPDEV"}[t];return Object(S.jsxs)("div",{className:Rt.a.environment,children:[Object(S.jsx)("span",{children:n}),Object(S.jsx)(bt.a,{icon:e})]})},Ht=()=>Object(S.jsxs)(S.Fragment,{children:["Set your ",Object(S.jsx)("var",{children:"kbase_session"})," cookie to your login token."]});function Jt(){const t=m(),e=function(t){const e=document.cookie.split(";").map((t=>t.trim().split("="))).find((([e,n])=>e.trim()===t));return e?e[1]:void 0}("kbase_session");return Object(o.useEffect)((()=>{e&&t(B(e))}),[t,e]),Object(o.useEffect)((()=>{t(h("ci"))}),[t]),Object(S.jsx)(u.a,{basename:"",children:Object(S.jsxs)("div",{className:l.a.container,children:[Object(S.jsx)("div",{className:l.a.topbar,children:Object(S.jsx)(Gt,{})}),Object(S.jsx)("div",{className:l.a.left_navbar,children:Object(S.jsx)(Kt,{})}),Object(S.jsx)("div",{className:l.a.page_content,children:e?Object(S.jsx)(qt,{}):Object(S.jsx)(Ht,{})})]})})}const Vt={assemblyinput:{color:"#F44336",icon:"icon icon-reads"},assembly:{color:"#920D58",icon:jt.a},chromatographymatrix:{color:"#E91E63",icon:jt.G},collection:{color:"#E91E63",icon:jt.u},contigset:{color:"#3F51B5",icon:jt.a},domainalignment:{color:"#000000",icon:jt.B},estimatekresult:{color:"#000000",icon:jt.h},expressionmatrix:{color:"#2196F3",icon:jt.H},expressionsample:{color:"#2196F3",icon:jt.r},expressionseries:{color:"#2196F3",icon:jt.r},fba:{color:"#673AB7",icon:"icon icon-metabolism"},fbamodel:{color:"#673AB7",icon:"icon icon-metabolism"},featureclusters:{color:"#AEEA00",icon:jt.I},featureset:{color:"#AEEA00",icon:jt.u},functionalmatrix:{color:"#000000",icon:jt.G},genome:{color:"#3F51B5",icon:"icon icon-genome"},genomeannotation:{color:"#920D58",icon:"icon icon-genome"},genomecomparison:{color:"#3F51B5",icon:"icon icon-compare"},genomeset:{color:"#3F51B5",icon:jt.u},heatmap:{color:"#795548",icon:jt.H},media:{color:"#795548",icon:jt.q},metagenome:{color:"#795548",icon:"icon icon-metagenome"},network:{color:"#795548",icon:jt.j},pairedendlibrary:{color:"#795548",icon:"icon icon-reads"},pangenome:{color:"#795548",icon:jt.f},phenotypeset:{color:"#795548",icon:jt.u},phenotypesimulationset:{color:"#795548",icon:jt.u},proteomecomparison:{color:"#795548",icon:jt.b},readsset:{color:"#795548",icon:"icon icon-reads"},referenceassembly:{color:"#795548",icon:jt.d},singleendlibrary:{color:"#795548",icon:"icon icon-reads"},taxonomicmatrix:{color:"#795548",icon:jt.G},taxon:{color:"#920D58",icon:jt.G},tree:{color:"#795548",icon:"icon icon-tree"}};let Ut;!function(t){t.release="release",t.beta="beta",t.dev="dev"}(Ut||(Ut={}));const $t=Object(d.b)("icons",(async({appId:t,appTag:e},n)=>{const o=n.getState(),{appIconCache:r,defaultApp:a}=o.icons;if(!(e in r))return{appTag:e,appId:t,icon:a};if(!r[e][t]){const n=Z("NarrativeMethodStore");try{const[o]=await n.call("get_method_brief_info",[{ids:[t],tag:e}]),r=o.icon.url;return r?{appTag:e,appId:t,icon:{icon:`${z.NarrativeMethodStore.slice(0,-4)}/${r}`,color:"silver"}}:{appTag:e,appId:t,icon:a}}catch{return{appTag:e,appId:t,icon:a}}}return{appTag:e,appId:t,icon:r[e][t]}})),te={appIconCache:{release:{},beta:{},dev:{}},typeIconInfos:Vt,defaultApp:{icon:jt.m,color:"#683AB7"},defaultType:{icon:jt.p,color:"#F44336"},loadingIcon:{icon:jt.D,color:"silver"}};var ee=Object(d.c)({name:"icons",initialState:te,reducers:{},extraReducers:t=>{t.addCase($t.fulfilled,((t,e)=>{const n={...t.appIconCache[e.payload.appTag],[e.payload.appId]:e.payload.icon};t.appIconCache={...t.appIconCache,[e.payload.appTag]:n}}))}}).reducer;const ne=(()=>{const t={devTools:!0,reducer:{auth:k,count:U,icons:ee,layout:j,profile:ft}};return Object(d.a)(t)})();var oe=t=>{t&&t instanceof Function&&n.e(3).then(n.bind(null,104)).then((({getCLS:e,getFID:n,getFCP:o,getLCP:r,getTTFB:a})=>{e(t),n(t),o(t),r(t),a(t)}))};i.a.render(Object(S.jsx)(r.a.StrictMode,{children:Object(S.jsx)(c.a,{store:ne,children:Object(S.jsx)(Jt,{})})}),document.getElementById("root")),oe()},15:function(t,e,n){t.exports={topbar:"TopBar_topbar__3xoma",topbar_item:"TopBar_topbar_item__20292",stretch:"TopBar_stretch__5Y5fJ",hamburger_menu:"TopBar_hamburger_menu__1Nc7c",hamburger_menu_icon:"TopBar_hamburger_menu_icon__3ZgFI",page_title:"TopBar_page_title__1OjqW",environment:"TopBar_environment__Lx09_",login_menu:"TopBar_login_menu__agXq7",login_menu_username:"TopBar_login_menu_username__2AgT3",login_menu_button:"TopBar_login_menu_button__1n-4a",login_menu_icon:"TopBar_login_menu_icon__RrxGE"}},31:function(t,e,n){t.exports={nav_list:"LeftNavBar_nav_list__iLWGq",nav_item:"LeftNavBar_nav_item__35CL2",active:"LeftNavBar_active__38wjJ",nav_icon:"LeftNavBar_nav_icon__e2bJK",nav_desc:"LeftNavBar_nav_desc__1vXc6"}},36:function(t,e,n){t.exports={container:"App_container__MiK3W",left_navbar:"App_left_navbar__SQTn7",page_content:"App_page_content__1GAyC",topbar:"App_topbar__Qqa7Z"}},37:function(t,e,n){t.exports={"react-select":"Select_react-select__3AP0a","react-select--right":"Select_react-select--right__3i7Ff",option_content:"Select_option_content__MAs3-",option_content_icon:"Select_option_content_icon__30ltO"}},38:function(t,e,n){t.exports={narratives:"Profile_narratives__23Ewd",profile:"Profile_profile__OB4QD","profile-narratives":"Profile_profile-narratives__2-BrG","profile-nav":"Profile_profile-nav__O_pFN"}},64:function(t,e,n){t.exports={button:"Button_button__dy3Mj","button--orange":"Button_button--orange__qz8LE","button--yellow":"Button_button--yellow__39O2j","button--green":"Button_button--green__1jnMN","button--grellow":"Button_button--grellow__XMsIY","button--blue":"Button_button--blue__1qDlS","button--ocean_blue":"Button_button--ocean_blue__1duT1","button--teal":"Button_button--teal__2EkA4","button--purple":"Button_button--purple__3iYfW","button--frost_blue":"Button_button--frost_blue__3z68r","button--red":"Button_button--red__1uXEY","button--grey":"Button_button--grey__2blQ7","button--white":"Button_button--white__113aw","button--black":"Button_button--black__xRyDK","button--ink":"Button_button--ink__2A2yA","button--neutral":"Button_button--neutral__1N09L","button--silver":"Button_button--silver__vJtBR","button--base-lightest":"Button_button--base-lightest__1VdzN","button--base-lighter":"Button_button--base-lighter__2fatb","button--base-light":"Button_button--base-light__2MHXG","button--base":"Button_button--base__1K6ls","button--base-dark":"Button_button--base-dark__3FBIk","button--base-darkest":"Button_button--base-darkest__1svmv","button--primary-lightest":"Button_button--primary-lightest__2PHrk","button--primary-lighter":"Button_button--primary-lighter__1eKQI","button--primary-light":"Button_button--primary-light__1e3vb","button--primary":"Button_button--primary__CMiIk","button--primary-vivid":"Button_button--primary-vivid__1ZWxc","button--primary-dark":"Button_button--primary-dark__fQWHL","button--primary-darker":"Button_button--primary-darker__xKZUS","button--secondary-lightest":"Button_button--secondary-lightest__38WC2","button--secondary-lighter":"Button_button--secondary-lighter__3vQVa","button--secondary-light":"Button_button--secondary-light__uMEFl","button--secondary":"Button_button--secondary__1e0cQ","button--secondary-vivid":"Button_button--secondary-vivid__2A61H","button--secondary-dark":"Button_button--secondary-dark__1LQ2V","button--secondary-darkest":"Button_button--secondary-darkest__2Jz7d","button--accent-cool-lightest":"Button_button--accent-cool-lightest__3Zu74","button--accent-cool-lighter":"Button_button--accent-cool-lighter__3fti9","button--accent-cool-light":"Button_button--accent-cool-light__1yyds","button--accent-cool":"Button_button--accent-cool__3Xgd-","button--accent-cool-dark":"Button_button--accent-cool-dark__2hDMk","button--accent-cool-darker":"Button_button--accent-cool-darker__immsh","button--accent-warm-lightest":"Button_button--accent-warm-lightest__Xla-z","button--accent-warm-lighter":"Button_button--accent-warm-lighter__2jrDk","button--accent-warm-light":"Button_button--accent-warm-light__2G7qV","button--accent-warm":"Button_button--accent-warm__vXmYD","button--accent-warm-dark":"Button_button--accent-warm-dark__1Nuye","button--accent-warm-darker":"Button_button--accent-warm-darker__1cOoV","button--success-lightest":"Button_button--success-lightest__2wUDb","button--success-lighter":"Button_button--success-lighter__2j8wQ","button--success-light":"Button_button--success-light__2aE0B","button--success":"Button_button--success__3vCMU","button--success-dark":"Button_button--success-dark__G5BI0","button--success-darker":"Button_button--success-darker__iR1cJ","button--info-lightest":"Button_button--info-lightest__2dM7_","button--info-lighter":"Button_button--info-lighter__3N_Vt","button--info-light":"Button_button--info-light__2MiYm","button--info":"Button_button--info__2smAM","button--info-dark":"Button_button--info-dark__26IIe","button--info-darker":"Button_button--info-darker__Gh1hS","button--warning-lightest":"Button_button--warning-lightest__3ALzN","button--warning-lighter":"Button_button--warning-lighter__372D9","button--warning-light":"Button_button--warning-light__qDy6U","button--warning":"Button_button--warning__3RIhA","button--warning-dark":"Button_button--warning-dark__3LFfO","button--warning-darker":"Button_button--warning-darker__JYMGP","button--error-lightest":"Button_button--error-lightest__3dK53","button--error-lighter":"Button_button--error-lighter__1iMHm","button--error-light":"Button_button--error-light__3SizE","button--error":"Button_button--error__3mR9r","button--error-dark":"Button_button--error-dark__3Q7ul","button--error-darker":"Button_button--error-darker__3UV_y","button--disabled-lightest":"Button_button--disabled-lightest__1ijlQ","button--disabled-light":"Button_button--disabled-light__2ceGa","button--disabled":"Button_button--disabled__3T0_E","button--disabled-dark":"Button_button--disabled-dark__-1HHP","button--mid-green":"Button_button--mid-green__2TurF","button--mid-blue":"Button_button--mid-blue__1QNpx","button--icon-app":"Button_button--icon-app__3Tz2h","button--icon-generic":"Button_button--icon-generic__YlhDR","button--icon-type":"Button_button--icon-type__k35QE","button--created":"Button_button--created__1tQgc","button--estimating":"Button_button--estimating__3y4VD","button--queued":"Button_button--queued__3FS55","button--running":"Button_button--running__3kPz5","button--completed":"Button_button--completed__zAYQj","button--terminated":"Button_button--terminated__2tKSS","button--does_not_exist":"Button_button--does_not_exist__3z4Im"}},65:function(t,e,n){t.exports={dropdown:"Dropdown_dropdown__QusLm"}},76:function(t,e,n){}},[[103,1,2]]]);
//# sourceMappingURL=main.4a936b87.chunk.js.map