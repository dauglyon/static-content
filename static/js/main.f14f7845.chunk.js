(this["webpackJsonpui-refresh-test"]=this["webpackJsonpui-refresh-test"]||[]).push([[0],{35:function(e,t,n){},36:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),o=n(16),a=n.n(o),i=n(12),s=(n(35),n(36),n(10)),u=n(4),j=function(){return Object(i.b)()},d=i.c,b=n(13),h=n.n(b),l=n(20),f=n(9),x="https://ci.kbase.us/services/auth",O={pending:!1},k=Object(f.b)("auth/authFromToken",function(){var e=Object(l.a)(h.a.mark((function e(t){var n,r,c,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/api/V2/token"),{method:"GET",headers:{Authorization:t||""}});case 2:if((n=e.sent).ok){e.next=15;break}return r=n.statusText,e.prev=5,e.next=8,n.json();case 8:c=e.sent.error,r+=": ".concat(c.message),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(5);case 14:throw new Error('Failed to validate token: "'.concat(r,'"'));case 15:return e.next=17,n.json();case 17:return o=e.sent,e.abrupt("return",{token:t,tokenInfo:o});case 19:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t){return e.apply(this,arguments)}}()),p=Object(f.b)("auth/revokeCurrentToken",function(){var e=Object(l.a)(h.a.mark((function e(t,n){var r,c,o,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=null===(r=n.getState().auth._tokenInfo)||void 0===r?void 0:r.id,o=n.getState().auth.token,c&&o){e.next=4;break}throw new Error("Failed to revoke token: No token to revoke");case 4:return e.next=6,fetch("".concat(x,"/tokens/revoke/").concat(c),{method:"DELETE",headers:{Authorization:o||""}});case 6:if((a=e.sent).ok){e.next=9;break}throw new Error("Failed to revoke token: ".concat(a.statusText));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),v=Object(f.c)({name:"auth",initialState:O,reducers:{},extraReducers:function(e){return e.addCase(k.pending,(function(e){e.error=void 0,e.pending=!0})).addCase(k.fulfilled,(function(e,t){e.token=t.payload.token,e.username=t.payload.tokenInfo.user,e._tokenInfo=t.payload.tokenInfo,e.pending=!1})).addCase(k.rejected,(function(e,t){e.error=t.error.message,e.username=void 0,e._tokenInfo=void 0,e.pending=!1})).addCase(p.pending,(function(){})).addCase(p.fulfilled,(function(){return O})).addCase(p.rejected,(function(){}))}}).reducer,g=n(17);var m=n(24),C=n(25),w=n(1);function E(){return Object(w.jsx)("nav",{children:Object(w.jsxs)("ul",{children:[Object(w.jsx)("li",{children:Object(w.jsxs)(s.b,{to:"/",children:[Object(w.jsx)(m.a,{icon:C.a}),"Home"]})}),Object(w.jsx)("li",{children:Object(w.jsx)(s.b,{to:"/about",children:"About"})}),Object(w.jsx)("li",{children:Object(w.jsx)(s.b,{to:"/count",children:"Count"})}),Object(w.jsx)("li",{children:Object(w.jsx)(s.b,{to:"/users",children:"Users"})}),Object(w.jsx)("li",{children:Object(w.jsx)(s.b,{to:"/auth",children:"Auth"})})]})})}var F=Object(f.c)({name:"count",initialState:{count:0},reducers:{increment:function(e){e.count+=1}}}),T=F.reducer,y=F.actions.increment,I=function(e){return e.count.count},A=function(){var e=d(I);return Object(w.jsx)(w.Fragment,{children:e})};function S(){var e=j();return Object(w.jsxs)("section",{children:[Object(w.jsxs)("h2",{children:["The count is: ",Object(w.jsx)(A,{})]}),Object(w.jsx)("button",{onClick:function(){e(y())},children:"Add"})]})}function L(){return Object(w.jsx)("h2",{children:"About"})}function B(){return Object(w.jsx)("h2",{children:"KBase Home"})}function P(){var e=d((function(e){return e.auth})),t=e.username,n=e.token,r=e.error,c=e.pending;return Object(w.jsxs)("div",{children:[Object(w.jsx)("h2",{children:"Auth"}),Object(w.jsx)("p",{children:n?"You are logged in as '".concat(t,"'"):"You are not logged in"}),c?Object(w.jsx)("p",{children:"Please wait..."}):n?Object(w.jsx)(z,{}):Object(w.jsx)(_,{}),r?Object(w.jsx)("span",{style:{color:"red"},children:r}):null]})}var _=function(){var e=j(),t=Object(r.useState)(),n=Object(g.a)(t,2),c=n[0],o=n[1];return Object(w.jsxs)("div",{children:[Object(w.jsx)("input",{placeholder:"kbase token",type:"text",value:null!==c&&void 0!==c?c:"",onChange:function(e){return o(e.target.value)}}),Object(w.jsx)("button",{onClick:function(){c?e(k(c)):alert("Please enter a kbase token")},children:"Login"})]})},z=function(){var e=j();return Object(w.jsx)("div",{children:Object(w.jsx)("button",{onClick:function(){return e(p())},children:"Logout of KBase"})})};function D(){return Object(w.jsx)("h2",{children:"Users"})}function H(){var e=j(),t=function(e){var t=document.cookie.split(";").map((function(e){return e.trim().split("=")})).find((function(t){var n=Object(g.a)(t,2),r=n[0];return n[1],r.trim()===e}));return t?t[1]:void 0}("kbase_session");return Object(r.useEffect)((function(){t&&e(k(t))}),[t]),Object(w.jsx)(s.a,{children:Object(w.jsxs)("div",{children:[Object(w.jsx)(E,{}),Object(w.jsxs)(u.c,{children:[Object(w.jsx)(u.a,{path:"/about",children:Object(w.jsx)(L,{})}),Object(w.jsx)(u.a,{path:"/count",children:Object(w.jsx)(S,{})}),Object(w.jsx)(u.a,{path:"/users",children:Object(w.jsx)(D,{})}),Object(w.jsx)(u.a,{path:"/auth",children:Object(w.jsx)(P,{})}),Object(w.jsx)(u.a,{path:"/",children:Object(w.jsx)(B,{})})]})]})})}var J=Object(f.a)({reducer:{count:T,auth:v}}),K=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,46)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,o=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),o(e),a(e)}))};a.a.render(Object(w.jsx)(c.a.StrictMode,{children:Object(w.jsx)(i.a,{store:J,children:Object(w.jsx)(H,{})})}),document.getElementById("root")),K()}},[[45,1,2]]]);
//# sourceMappingURL=main.f14f7845.chunk.js.map